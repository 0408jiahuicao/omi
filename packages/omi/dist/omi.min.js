!function(){"use strict";function t(){}function e(e,n){var r,o,i,a,s=nt;for(a=arguments.length;a-- >2;)et.push(arguments[a]);n&&null!=n.children&&(et.length||et.push(n.children),delete n.children);while(et.length)if((o=et.pop())&&void 0!==o.pop)for(a=o.length;a--;)et.push(o[a]);else"boolean"==typeof o&&(o=null),(i="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o+="":"string"!=typeof o&&(i=!1)),i&&r?s[s.length-1]+=o:s===nt?s=[o]:s.push(o),r=i;var c=new t;return c.nodeName=e,c.children=s,c.attributes=null==n?void 0:n,c.key=null==n?void 0:n.key,void 0!==tt.vnode&&tt.vnode(c),c}function n(t){var e=document.createElement("style");return e.textContent=t,e}function r(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function o(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){if(!t||a(t))return{};var e={};return Object.keys(t).forEach(function(n){e[n]=t[n].value}),e}function c(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&l(t,e.nodeName):n||t._componentConstructor===e.nodeName}function l(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function u(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function f(t,e,n,r,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)i(n,null),i(r,t);else if("class"!==e||o)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(t.style[a]="");for(var a in r)t.style[a]="number"==typeof r[a]&&!1===rt.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||(t.addEventListener(e,h,s),"tap"==e&&(t.addEventListener("touchstart",d,s),t.addEventListener("touchstart",y,s))):(t.removeEventListener(e,h,s),"tap"==e&&(t.removeEventListener("touchstart",d,s),t.removeEventListener("touchstart",y,s))),(t.__l||(t.__l={}))[e]=r}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==r?"":r}catch(t){}null!=r&&!1!==r||"spellcheck"==e||t.removeAttribute(e)}else{var c=o&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"string"==typeof r&&(c?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function h(t){return this.__l[t.type](tt.event&&tt.event(t)||t)}function d(t){this.F=t.touches[0].pageX,this.G=t.touches[0].pageY,this.H=document.body.scrollTop}function y(t){Math.abs(t.changedTouches[0].pageX-this.F)<30&&Math.abs(t.changedTouches[0].pageY-this.G)<30&&Math.abs(document.body.scrollTop-this.H)<30&&this.dispatchEvent(new CustomEvent("tap",{detail:t}))}function v(t,e,n,r,o,i){var s;if(ot++||(it=null!=o&&void 0!==o.ownerSVGElement,at=null!=t&&!("__omiattr_"in t)),a(e)){s=[];var c=null;if(a(t)){var l=t.length,u=e.length,p=l>=u?l:u;c=t[0].parentNode;for(var f=0;f<p;f++){var h=b(t[f],e[f],n,r,i);s.push(h),f>l-1&&c.appendChild(h)}}else e.forEach(function(e){var a=b(t,e,n,r,i);s.push(a),o&&o.appendChild(a)})}else s=a(t)?b(t[0],e,n,r,i):b(t,e,n,r,i),o&&s.parentNode!==o&&o.appendChild(s);return--ot||(at=!1),s}function b(t,e,n,r,o){t&&e&&t.props&&(t.props.children=e.children);var i=t,a=it;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),m(t,!0))),i.__omiattr_=!0,i;var s=e.nodeName;if(it="svg"===s||"foreignObject"!==s&&it,s+="",(!t||!l(t,s))&&(i=u(s,it),t)){while(t.firstChild)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),m(t,!0)}var c=i.firstChild,p=i.__omiattr_,f=e.children;if(null==p){p=i.__omiattr_={};for(var h=i.attributes,d=h.length;d--;)p[h[d].name]=h[d].value}return!at&&f&&1===f.length&&"string"==typeof f[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=f[0]&&(c.nodeValue=f[0]):(f&&f.length||null!=c)&&("WeElement"==i.constructor.is&&i.constructor.noSlot||g(i,f,n,r,at||null!=p.dangerouslySetInnerHTML)),O(i,e.attributes,p,e.children),i.props&&(i.props.children=e.children),it=a,i}function g(t,e,n,r,o){var i,a,s,l,u,f=t.childNodes,h=[],d={},y=0,v=0,g=f.length,w=0,O=e?e.length:0;if(0!==g)for(var j=0;j<g;j++){var _=f[j],x=_.__omiattr_,C=O&&x?_._component?_._component.__k:x.key:null;null!=C?(y++,d[C]=_):(x||(void 0!==_.splitText?!o||_.nodeValue.trim():o))&&(h[w++]=_)}if(0!==O)for(var j=0;j<O;j++){l=e[j],u=null;var C=l.key;if(null!=C)y&&void 0!==d[C]&&(u=d[C],d[C]=void 0,y--);else if(!u&&v<w)for(i=v;i<w;i++)if(void 0!==h[i]&&c(a=h[i],l,o)){u=a,h[i]=void 0,i===w-1&&w--,i===v&&v++;break}u=b(u,l,n,r),s=f[j],u&&u!==t&&u!==s&&(null==s?t.appendChild(u):u===s.nextSibling?p(s):t.insertBefore(u,s))}if(y)for(var j in d)void 0!==d[j]&&m(d[j],!1);while(v<=w)void 0!==(u=h[w--])&&m(u,!1)}function m(t,e){null!=t.__omiattr_&&t.__omiattr_.ref&&t.__omiattr_.ref(null),!1!==e&&null!=t.__omiattr_||p(t),w(t)}function w(t){t=t.lastChild;while(t){var e=t.previousSibling;m(t,!0),t=e}}function O(t,e,n,o){var i,a=!1,s=t.update;for(i in n)e&&null!=e[i]||null==n[i]||(f(t,i,n[i],n[i]=void 0,it),s&&(delete t.props[i],a=!0));for(i in e)s&&"object"==typeof e[i]?(t.props[r(i)]=e[i],a=!0):"children"===i||"innerHTML"===i||i in n&&e[i]===("value"===i||"checked"===i?t[i]:n[i])||(f(t,i,n[i],n[i]=e[i],it),s&&(t.props[r(i)]=e[i],a=!0));s&&t.parentNode&&(a||o.length>0)&&(t.receiveProps(t.props,t.data),t.update())}function j(t,e){ct.push({fn:t,scope:e})}function _(){ct.forEach(function(t){t.fn.call(t.scope)}),lt.forEach(function(t){t.fn.call(t.scope)}),lt.length=0}function x(t,e){lt.push({fn:t,scope:e})}function C(t){t.observe=!0}function E(t){var e=null;t.data=new st(t.data).observe(!1,function(n){t.J||"replace"===n.op&&n.oldValue===n.value||(clearTimeout(e),e=setTimeout(function(){t.update(),_()},0))})}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function M(t,e,n){if(e="string"==typeof e?document.querySelector(e):e,n){n.instances=[],A(n);var r=null,o={};n.data=new st(n.data).observe(!1,function(t){if(clearTimeout(r),"remove"===t.op){var e=H(t.path,n);o[e.k]=e.v,r=setTimeout(function(){k(o,n),o={}},0)}else{var i=I(t.path);o[i]=t.value,r=setTimeout(function(){k(o,n),o={}},0)}}),e.store=n}return v(null,t,{},!1,e,!1)}function k(t,e){e.update(t)}function A(t){t.update=function(t){var e=this,n=R(this.globalData,t);Object.keys(t).length>0&&(this.instances.forEach(function(r){(n||e.updateAll||r.constructor.updatePath&&S(t,r.constructor.updatePath))&&r.update()}),this.onChange&&this.onChange(t))}}function R(t,e){if(!t)return!1;for(var n in e){if(t.indexOf(n)>-1)return!0;for(var r=0,o=t.length;r<o;r++)if(L(n,t[r]))return!0}return!1}function S(t,e){for(var n in t){if(e[n])return!0;for(var r in e)if(L(n,r))return!0}return!1}function L(t,e){if(0===t.indexOf(e)){var n=t.substr(e.length,1);if("["===n||"."===n)return!0}return!1}function I(t){var e="";return t.replace("/","").split("/").forEach(function(t,n){n?isNaN(+t)?e+="."+t:e+="["+t+"]":e+=t}),e}function H(t,e){for(var n=t.replace("/","").split("/"),r=e.data[n[0]],o=1,i=n.length;o<i-1;o++)r=r[n[o]];return{k:V(t),v:r}}function V(t){var e="",n=t.replace("/","").split("/"),r=n.length;return n.forEach(function(t,n){n<r-1&&(n?isNaN(+t)?e+="."+t:e+="["+t+"]":e+=t)}),e}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function W(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function F(t,e){if("WeElement"===e.is)customElements.define(t,e),e.data&&!e.pure&&(e.updatePath=J(e.data));else{var r=function(t){function r(){var e,n,o;B(this,r);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=n=D(this,t.call.apply(t,[this].concat(a))),n.C=0,n.D={},o=e,D(n,o)}return W(r,t),r.prototype.render=function(t,n){return e.call(this,t,n)},r.prototype.beforeRender=function(){this.C=0},r.prototype.useCss=function(t){var e=this.shadowRoot.querySelector("style");e&&this.shadowRoot.removeChild(e),this.shadowRoot.appendChild(n(t))},r.prototype.useData=function(t){return this.use({data:t})},r.prototype.use=function(t){var e=this;this.C++;var n=function t(n){var r=e.D[t.id];r.data=n,e.update(),r.effect&&r.effect()};return n.id=this.C,this.B?[this.D[this.C].data,n]:(this.D[this.C]=t,[t.data,n])},r.prototype.installed=function(){this.B=!0},r}(pt);customElements.define(t,r)}}function J(t){var e={};return U(t,e),e}function U(t,e){Object.keys(t).forEach(function(n){e[n]=!0;var r=Object.prototype.toString.call(t[n]);"[object Object]"===r?Y(t[n],n,e):"[object Array]"===r&&G(t[n],n,e)})}function Y(t,e,n){Object.keys(t).forEach(function(r){n[e+"."+r]=!0,delete n[e];var o=Object.prototype.toString.call(t[r]);"[object Object]"===o?Y(t[r],e+"."+r,n):"[object Array]"===o&&G(t[r],e+"."+r,n)})}function G(t,e,n){t.forEach(function(t,r){n[e+"["+r+"]"]=!0,delete n[e];var o=Object.prototype.toString.call(t);"[object Object]"===o?Y(t,e+"["+r+"]",n):"[object Array]"===o&&G(t,e+"["+r+"]",n)})}function q(t,e){return function(n){n.pure=e,F(t,n)}}function X(t,n){return e(t.nodeName,o(o({},t.attributes),n),arguments.length>2?[].slice.call(arguments,2):t.children)}function $(t){var e=t.parentNode;while(e){if(e.host)return e.host;e=e.parentNode}}function z(t){return t.replace(/([1-9]\d*|0)(\.\d*)*rpx/g,function(t,e){return window.innerWidth*+e/750+"px"})}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var tt={store:null,root:function(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:self||window||global||function(){return this}()}()},et=[],nt=[];!function(){if(void 0!==window.Reflect&&void 0!==window.customElements&&!window.customElements.hasOwnProperty("polyfillWrapFlushCallback")){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}}(),"function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var rt=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,ot=0,it=!1,at=!1,st=function(){function t(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function e(t){return-1==t.indexOf("/")&&-1==t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function n(t,e){var n=[],r=t.parenthoodMap.get(e);while(r&&r.path)n.unshift(r.path),r=t.parenthoodMap.get(r.parent);if(n.length){return"/"+n.join("/")}return""}function r(t,r,o,i){var a=n(t,r),s=a+"/"+e(o);if(t.proxifiedObjectsMap.has(i)){t.parenthoodMap.set(t.proxifiedObjectsMap.get(i).originalObject,{parent:r,path:o})}var c=t.proxifiedObjectsMap.get(i);c&&!t.isProxifyingTreeNow&&(c.inherited=!0),i&&"object"==typeof i&&!t.proxifiedObjectsMap.has(i)&&(t.parenthoodMap.set(i,{parent:r,path:o}),i=t.A(r,i,o));var l={op:"remove",path:s};if(void 0===i){if(!Array.isArray(r)&&!r.hasOwnProperty(o))return Reflect.set(r,o,i);Array.isArray(r)&&(l.op="replace",l.value=null);var u=t.proxifiedObjectsMap.get(r[o]);u&&(t.parenthoodMap.delete(r[o]),t.disableTrapsForProxy(u),t.proxifiedObjectsMap.delete(u))}else{if(Array.isArray(r)&&!Number.isInteger(+(""+o)))return"length"!=o&&console.warn("JSONPatcherProxy noticed a non-integer prop was set for an array. This will not emit a patch"),Reflect.set(r,o,i);l.op="add",r.hasOwnProperty(o)&&(void 0!==r[o]||Array.isArray(r))&&(l.op="replace"),l.value=i}l.oldValue=r[o];var p=Reflect.set(r,o,i);return t.defaultCallback(l),p}function o(t,r,o){if(void 0!==r[o]){var i=n(t,r),a=i+"/"+e(o),s=t.proxifiedObjectsMap.get(r[o]);s&&(s.inherited?s.inherited=!1:(t.parenthoodMap.delete(s.originalObject),t.disableTrapsForProxy(s),t.proxifiedObjectsMap.delete(r[o])));var c=Reflect.deleteProperty(r,o);return t.defaultCallback({op:"remove",path:a}),c}}function i(){var t=this;this.defaultCallback=function(e){t.isRecording&&t.patches.push(e),t.userCallback&&t.userCallback(e)},this.isObserving=!0}function a(){this.defaultCallback=function(){},this.isObserving=!1}function s(t,e){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,"boolean"!=typeof e&&(e=!0),this.showDetachedWarning=e,this.originalObject=t,this.cachedProxy=null,this.isRecording=!1,this.resume=i.bind(this),this.pause=a.bind(this)}return s.deepClone=t,s.escapePathComponent=e,s.prototype.generateProxyAtPath=function(t,e,n){var i=this;if(!e)return e;var a={set:function(t,e,n){return r(i,t,e,n)},deleteProperty:function(t,e){return o(i,t,e)}},s=Proxy.revocable(e,a);return s.trapsInstance=a,s.originalObject=e,this.parenthoodMap.set(e,{parent:t,path:n}),this.proxifiedObjectsMap.set(s.proxy,s),s.proxy},s.prototype.A=function(t,n,r){for(var o in n)n.hasOwnProperty(o)&&n[o]instanceof Object&&(n[o]=this.A(n,n[o],e(o)));return this.generateProxyAtPath(t,n,r)},s.prototype.proxifyObjectTree=function(t){this.pause(),this.isProxifyingTreeNow=!0;var e=this.A(void 0,t,"");return this.isProxifyingTreeNow=!1,this.resume(),e},s.prototype.disableTrapsForProxy=function(t){if(this.showDetachedWarning){var e="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";t.trapsInstance.set=function(t,n,r){return console.warn(e),Reflect.set(t,n,r)},t.trapsInstance.set=function(t,n,r){return console.warn(e),Reflect.set(t,n,r)},t.trapsInstance.deleteProperty=function(t,e){return Reflect.deleteProperty(t,e)}}else delete t.trapsInstance.set,delete t.trapsInstance.get,delete t.trapsInstance.deleteProperty},s.prototype.observe=function(t,e){if(!t&&!e)throw Error("You need to either record changes or pass a callback");return this.isRecording=t,this.userCallback=e,t&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject)},s.prototype.generate=function(){if(!this.isRecording)throw Error("You should set record to true to get patches later");return this.patches.splice(0,this.patches.length)},s.prototype.revoke=function(){this.proxifiedObjectsMap.forEach(function(t){t.revoke()})},s.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},s}(),ct=[],lt=[],ut=0,pt=function(t){function e(){P(this,e);var n=T(this,t.call(this));return n.props=Object.assign(s(n.constructor.props),n.constructor.defaultProps),n.I=ut++,n.data=n.constructor.data||{},n}return N(e,t),e.prototype.connectedCallback=function(){if(!this.constructor.pure){var t=this.parentNode;while(t&&!this.store)this.store=t.store,t=t.parentNode||t.host;this.store&&this.store.instances.push(this)}this.beforeInstall(),!this.B&&this.install(),this.afterInstall();var e;if(this.shadowRoot){e=this.shadowRoot;var r;while(r=e.firstChild)e.removeChild(r)}else e=this.attachShadow({mode:"open"});this.css&&e.appendChild(n(this.css())),!this.B&&this.beforeRender(),tt.afterInstall&&tt.afterInstall(this),this.constructor.observe&&(this.beforeObserve(),E(this),this.observed()),this.host=v(null,this.render(this.props,this.data,this.store),{},!1,null,!1),this.rendered(),a(this.host)?this.host.forEach(function(t){e.appendChild(t)}):e.appendChild(this.host),!this.B&&this.installed(),this.B=!0},e.prototype.disconnectedCallback=function(){if(this.uninstall(),this.B=!1,this.store)for(var t=0,e=this.store.instances.length;t<e;t++)if(this.store.instances[t]===this){this.store.instances.splice(t,1);break}},e.prototype.update=function(){this.J=!0,this.beforeUpdate(),this.beforeRender(),this.host=v(this.host,this.render(this.props,this.data,this.store),null,null,this.shadowRoot),this.afterUpdate(),this.updated(),this.J=!1},e.prototype.fire=function(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))},e.prototype.beforeInstall=function(){},e.prototype.install=function(){},e.prototype.afterInstall=function(){},e.prototype.installed=function(){},e.prototype.uninstall=function(){},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.updated=function(){},e.prototype.beforeRender=function(){},e.prototype.rendered=function(){},e.prototype.receiveProps=function(){},e.prototype.beforeObserve=function(){},e.prototype.observed=function(){},e}(HTMLElement);pt.is="WeElement";var ft=function(t){function e(){return K(this,e),Q(this,t.apply(this,arguments))}return Z(e,t),e.prototype.beforeInstall=function(){this.data=this.vm.data},e.prototype.observed=function(){this.vm.data=this.data},e}(pt);ft.observe=!0;var ht=pt,dt={tag:q,WeElement:pt,Component:ht,render:M,h:e,createElement:e,options:tt,define:F,observe:C,cloneElement:X,getHost:$,rpx:z,tick:j,nextTick:x,ModelView:ft};tt.root.Omi=dt,tt.root.Omi.version="5.0.0","undefined"!=typeof module?module.exports=dt:self.Omi=dt}();
//# sourceMappingURL=omi.min.js.map