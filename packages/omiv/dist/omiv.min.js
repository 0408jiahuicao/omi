!function(){"use strict";function t(t,r,n){var i=[];s(t)&&(0===t.length&&(t.__o_={__r_:t,__p_:"#"}),e(t,t));for(var f in t)t.hasOwnProperty(f)&&(n?s(r)&&_(r,f)?(i.push(f),o(t,f,null,t)):a(r)&&f===r&&(i.push(f),o(t,f,null,t)):(i.push(f),o(t,f,null,t)));t.__c_||(t.__c_=[]),t.__c_.push({all:!n,propChanged:n||r,eventPropArr:i})}function e(t,e){O.forEach(function(i){t[i]=function(){var t=Array.prototype.slice.call(this,0),s=Array.prototype[i].apply(this,Array.prototype.slice.call(arguments));if(RegExp("\\b"+i+"\\b").test(S)){for(var a in this)this.hasOwnProperty(a)&&!n(this[a])&&o(this,a,this.__o_.__p_,e);r("Array-"+i,this,t,this,this.__o_.__p_,e)}return s},t["pure"+i.substring(0,1).toUpperCase()+i.substring(1)]=function(){return Array.prototype[i].apply(this,Array.prototype.slice.call(arguments))}})}function o(t,i,a,_){if("__o_"!==i&&!n(t[i])){t.__o_||(t.__o_={__r_:_}),t.__o_.__p_=void 0!==a&&null!==a?a:"#";var f=t.__o_[i]=t[i];if(Object.defineProperty(t,i,{get:function(){return this.__o_[i]},set:function(e){var o=this.__o_[i];this.__o_[i]=e,r(i,e,o,this,t.__o_.__p_,_)},configurable:!0,enumerable:!0}),"object"==typeof f){s(f)&&(e(f,_),0===f.length&&(f.__o_||(f.__o_={}),f.__o_.__p_=void 0!==a&&null!==a?a+"-"+i:"#-"+i));for(var u in f)f.hasOwnProperty(u)&&o(f,u,t.__o_.__p_+"-"+i,_)}}}function r(t,e,r,n,s,a){if(e!==r&&(!i(e)||!i(r))&&a.__c_)for(var u=f(t,s),p=0,c=a.__c_.length;p<c;p++){var h=a.__c_[p];(h.all||_(h.eventPropArr,u)||0===u.indexOf("Array-"))&&h.propChanged.call(n,t,e,r,s)}0!==t.indexOf("Array-")&&"object"==typeof e&&o(n,t,n.__o_.__p_,a)}function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function i(t){return"number"==typeof t&&isNaN(t)}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"string"==typeof t}function _(t,e){for(var o=t.length;--o>-1;)if(e===t[o])return!0;return!1}function f(t,e){return"#"===e?t:e.split("-")[1]}function u(t,e,o){var r={};return t.forEach(function(t){if("string"==typeof t)r[t]=!0;else{var e=t[Object.keys(t)[0]];"string"==typeof e?r[e]=!0:"string"==typeof e[0]?r[e[0]]=!0:e[0].forEach(function(t){return r[t]=!0})}}),e&&(e[o]=r),r}function p(t,e){for(var o in t){if(e[o])return!0;for(var r in e)if(c(o,r))return!0}return!1}function c(t,e){if(0===t.indexOf(e)){var o=t.substr(e.length,1);if("["===o||"."===o)return!0}return!1}function h(t){var e="";return t.replace("#-","").split("-").forEach(function(t,o){o?isNaN(+t)?e+="."+t:e+="["+t+"]":e+=t}),e}function l(t){var e=t.beforeCreate,o=t.destroyed,r=t.use,n=t.useSelf;return t.computed=t.computed||{},t.store&&m(t.store),t.beforeCreate=function(){if(this.$store=P,E){if(r){var t={};for(var o in r)u(r[o],t,o),P[o].components.push(this);this.__$updatePath_=t}if(n){var i={};for(var s in n)u(n[s],i,s),P[s].updateSelfComponents.push(this);this.__$updateSelfPath_=i}}else r&&(this.__$updatePath_=u(r),P.components.push(this)),n&&(this.__$updateSelfPath_=u(n),P.updateSelfComponents.push(this));e&&e.apply(this,arguments)},t.destroyed=function(){if(E)for(var t in P)"replaceState"!==t&&(y(this,P[t].components),y(this,P[t].updateSelfComponents));else y(this,P.updateSelfComponents),y(this,P.components);o&&o.apply(this,arguments)},t.computed.state=function(){if(E){var t={};return Object.keys(P).forEach(function(e){t[e]=P[e].data}),t}return P.data},t.computed.store=function(){return P},t}function d(t){t.$forceUpdate(),t.$children.forEach(function(t){d(t)})}function v(e,o){e.components=[],e.updateSelfComponents=[],"undefined"!=typeof window&&t(e.data,function(t,r,n,i){var s={};s[h(i+"-"+t)]=!0,e.components.forEach(function(t){var e=t.__$updatePath_;o?e&&e[o]&&p(s,e[o])&&d(t):e&&p(s,e)&&d(t)}),e.updateSelfComponents.forEach(function(t){var e=t.__$updateSelfPath_;o?e&&e[o]&&p(s,e[o])&&t.$forceUpdate():e&&p(s,e)&&t.$forceUpdate()})})}function y(t,e){for(var o=0,r=e.length;o<r;o++)if(e[o]===t){e.splice(o,1);break}}function $(t,e,o,r){if(C)return o=o||P,m(o),new C(Object.assign({render:function(e){return e(t)}},r,o?{store:o}:{})).$mount(e);"production"!==process.env.NODE_ENV&&console.error("[Omiv] has not been installed yet. Vue.use(Omiv) should be called first.")}function m(t){if(t)if(P=t,P.data)E=!1,v(P);else{E=!0;for(var e in P)P[e].data&&v(P[e],e)}else P=void 0}function b(t){C=t,g(C)}function g(t){function e(){var t=this,e=this.$options,o=e.use,r=e.useSelf;if(e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store),this.$store&&!this.$store.replaceState&&(this.$store.replaceState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach(function(o){o.startsWith("_")||(t.$store.data[o]=e[o])})}),this.$store&&!P&&m(this.$store),E){if(o){var n={};for(var i in o)u(o[i],n,i),this.$store[i].components.push(this);this.__$updatePath_=n}if(r){var s={};for(var a in r)u(r[a],s,a),this.$store[a].updateSelfComponents.push(this);this.__$updateSelfPath_=s}}else o&&(this.__$updatePath_=u(o),this.$store.components.push(this)),r&&(this.__$updateSelfPath_=u(r),this.$store.updateSelfComponents.push(this))}function o(){if(E)for(var t in this.$store)"replaceState"!==t&&(y(this,this.$store[t].components),y(this,this.$store[t].updateSelfComponents));else y(this,this.$store.updateSelfComponents),y(this,this.$store.components)}t.mixin({beforeCreate:e,computed:{$state:function(){if(E){var t={};return Object.keys(this.$store).forEach(function(e){t[e]=P[e].data}),t}return this.$store.data}},destroyed:o})}var S="concat,copyWithin,fill,pop,push,reverse,shift,sort,splice,unshift,size",O=["concat","copyWithin","entries","every","fill","filter","find","findIndex","forEach","includes","indexOf","join","keys","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","slice","some","sort","splice","toLocaleString","toString","unshift","values","size"];t.add=function(t,e){o(t,e,t.__o_.__p_,t.__o_.__r_)},t.set=function(t,e,r){o(t,e,t.__o_.__p_,t.__o_.__r_),t[e]=r},Array.prototype.size=function(t){this.length=t};var C,P,E=!1,j={$:l,render:$,reset:m,install:b};"undefined"!=typeof module?module.exports=j:self.Omiv=j}();
//# sourceMappingURL=omiv.min.js.map