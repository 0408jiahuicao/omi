/*!
 *  OmiRouter v1.0.0 By dntzhang 
 *  Github: https://github.com/AlloyTeam/omi
 *  MIT Licensed.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OmiRouter=t():e.OmiRouter=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){!function(){function t(e,t){var n={};return e.forEach(function(e,r){r>0&&(n[t[r].replace(":","")]=e)}),n}function r(e){v.routes.every(function(n){var r=e.match(n.reg);if(r){var i=n.path.match(n.reg);return m=t(r,i),d=n.renderTo||v.renderTo,g=n.store||v.store,y=n.component,b=n,d="string"==typeof d?document.querySelector(d):d,o(e),!1}return!0})}function o(e){window.location.hash=e}function i(){R.params=m,x===d&&w&&!v.increment&&a(w);var e;if(v.increment)for(var t=0,n=O.length;t<n;t++)if(O[t]instanceof y){e=O[t];break}var r=!0;if(v.beforeRoute&&(r=v.beforeRoute({preRoute:E,route:b,preComponent:w})),!1!==r){if(e)e.$route=R;else{if(!b.component.prototype.render)return void b.component().then(function(t){u(e,t.default),c(e)});u(e,y)}c(e)}}function u(e,t){if(e=new t,v.increment&&O.push(e),e.$route=R,!v.increment)for(;d.firstChild;)d.removeChild(d.firstChild);Omi.render(e,d,g),v.init&&v.init({component:e,preComponent:w,preRoute:E,route:b})}function a(e){for(var t in Omi.instances)if(Omi.instances.hasOwnProperty(t)&&Omi.instances[t].id===e.id){delete Omi.instances[t],e=null;break}}function c(e){v.change&&v.change({component:e,preComponent:w,preRoute:E,route:b}),E=b,w=e,x=d}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if("undefined"!=typeof Omi){var s={},h=n(1),d=null,m={},y=null,g=null,v={},x=null,w=null,b=null,E=null,O=[],R={};s.init=function(e){v=e,e.routes.forEach(function(e){e.reg=h(e.path)});var t=window.location.hash.replace("#","");r(t||v.defaultRoute),t&&i()},window.addEventListener("hashchange",function(){r(window.location.hash.replace("#","")),i()},!1);var j=function(e){function t(){return p(this,t),f(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(){return Omi.h("a",{href:"#"+this.props.to},this.props.children[0])},t}(Omi.Component);s.Link=j,e.exports=s}}()},function(e,t,n){function r(e,t){for(var n,r=[],o=0,i=0,u="",a=t&&t.delimiter||"/";null!=(n=v.exec(e));){var f=n[0],l=n[1],s=n.index;if(u+=e.slice(i,s),i=s+f.length,l)u+=l[1];else{var h=e[i],d=n[2],m=n[3],y=n[4],g=n[5],x=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=d&&null!=h&&h!==d,E="+"===x||"*"===x,O="?"===x||"*"===x,R=n[2]||a,j=y||g;r.push({name:m||o++,prefix:d||"",delimiter:R,optional:O,repeat:E,partial:b,asterisk:!!w,pattern:j?p(j):w?".*":"[^"+c(R)+"]+?"})}}return i<e.length&&(u+=e.substr(i)),u&&r.push(u),r}function o(e,t){return a(r(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",a=n||{},c=r||{},p=c.pretty?i:encodeURIComponent,f=0;f<e.length;f++){var l=e[f];if("string"!=typeof l){var s,h=a[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(g(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(s=p(h[d]),!t[f].test(s))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===d?l.prefix:l.delimiter)+s}}else{if(s=l.asterisk?u(h):p(h),!t[f].test(s))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+s+'"');o+=l.prefix+s}}else o+=l}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function s(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}function h(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(y(e[o],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",l(n)),t)}function d(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){g(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",u=0;u<e.length;u++){var a=e[u];if("string"==typeof a)i+=c(a);else{var p=c(a.prefix),s="(?:"+a.pattern+")";t.push(a),a.repeat&&(s+="(?:"+p+s+")*"),s=a.optional?a.partial?p+"("+s+")?":"(?:"+p+"("+s+"))?":p+"("+s+")",i+=s}}var h=c(n.delimiter||"/"),d=i.slice(-h.length)===h;return r||(i=(d?i.slice(0,-h.length):i)+"(?:"+h+"(?=$))?"),i+=o?"$":r&&d?"":"(?="+h+"|$)",f(new RegExp("^"+i,l(n)),t)}function y(e,t,n){return g(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?s(e,t):g(e)?h(e,t,n):d(e,t,n)}var g=n(2);e.exports=y,e.exports.parse=r,e.exports.compile=o,e.exports.tokensToFunction=a,e.exports.tokensToRegExp=m;var v=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}}])});