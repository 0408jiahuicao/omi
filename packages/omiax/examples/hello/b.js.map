{"version":3,"file":"b.js","sources":["../../src/layout/layout.js","../../src/layout/layout-node.js","../../src/omi/h.js","../../src/omi/constants.js","../../src/omi/mock/util.js","../../src/omi/mock/element.js","../../src/omi/mock/text-node.js","../../src/omi/mock/document.js","../../src/omi/mock/index.js","../../src/omi/options.js","../../src/omi/util.js","../../src/omi/render-queue.js","../../src/omi/vdom/index.js","../../src/omi/dom/index.js","../../src/cax/draw.js","../../src/omi/vdom/diff.js","../../src/omi/define.js","../../src/omi/vdom/component-recycler.js","../../src/omi/style.js","../../src/omi/obaa.js","../../src/omi/tick.js","../../src/omi/observe.js","../../src/omi/vdom/component.js","../../src/omi/component.js","../../src/omi/render.js","../../src/omi/tag.js","../../src/omi/omi.js","main.js"],"sourcesContent":["// https://github.com/facebook/css-layout\n\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nvar computeLayout = (function() {\n\n  function capitalizeFirst(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  function getSpacing(node, type, suffix, location) {\n    var key = type + capitalizeFirst(location) + suffix;\n    if (key in node.style) {\n      return node.style[key];\n    }\n\n    key = type + suffix;\n    if (key in node.style) {\n      return node.style[key];\n    }\n\n    return 0;\n  }\n\n  function getPositiveSpacing(node, type, suffix, location) {\n    var key = type + capitalizeFirst(location) + suffix;\n    if (key in node.style && node.style[key] >= 0) {\n      return node.style[key];\n    }\n\n    key = type + suffix;\n    if (key in node.style && node.style[key] >= 0) {\n      return node.style[key];\n    }\n\n    return 0;\n  }\n\n  function isUndefined(value) {\n    return value === undefined;\n  }\n\n  function getMargin(node, location) {\n    return getSpacing(node, 'margin', '', location);\n  }\n\n  function getPadding(node, location) {\n    return getPositiveSpacing(node, 'padding', '', location);\n  }\n\n  function getBorder(node, location) {\n    return getPositiveSpacing(node, 'border', 'Width', location);\n  }\n\n  function getPaddingAndBorder(node, location) {\n    return getPadding(node, location) + getBorder(node, location);\n  }\n\n  function getMarginAxis(node, axis) {\n    return getMargin(node, leading[axis]) + getMargin(node, trailing[axis]);\n  }\n\n  function getPaddingAndBorderAxis(node, axis) {\n    return getPaddingAndBorder(node, leading[axis]) + getPaddingAndBorder(node, trailing[axis]);\n  }\n\n  function getJustifyContent(node) {\n    if ('justifyContent' in node.style) {\n      return node.style.justifyContent;\n    }\n    return 'flex-start';\n  }\n\n  function getAlignItem(node, child) {\n    if ('alignSelf' in child.style) {\n      return child.style.alignSelf;\n    }\n    if ('alignItems' in node.style) {\n      return node.style.alignItems;\n    }\n    return 'stretch';\n  }\n\n  function getFlexDirection(node) {\n    if ('flexDirection' in node.style) {\n      return node.style.flexDirection;\n    }\n    return 'column';\n  }\n\n  function getPositionType(node) {\n    if ('position' in node.style) {\n      return node.style.position;\n    }\n    return 'relative';\n  }\n\n  function getFlex(node) {\n    return node.style.flex;\n  }\n\n  function isFlex(node) {\n    return (\n      getPositionType(node) === CSS_POSITION_RELATIVE &&\n      getFlex(node) > 0\n    );\n  }\n\n  function isFlexWrap(node) {\n    return node.style.flexWrap === 'wrap';\n  }\n\n  function getDimWithMargin(node, axis) {\n    return node.layout[dim[axis]] + getMarginAxis(node, axis);\n  }\n\n  function isDimDefined(node, axis) {\n    return !isUndefined(node.style[dim[axis]]) && node.style[dim[axis]] >= 0;\n  }\n\n  function isPosDefined(node, pos) {\n    return !isUndefined(node.style[pos]);\n  }\n\n  function isMeasureDefined(node) {\n    return 'measure' in node.style;\n  }\n\n  function getPosition(node, pos) {\n    if (pos in node.style) {\n      return node.style[pos];\n    }\n    return 0;\n  }\n\n  // When the user specifically sets a value for width or height\n  function setDimensionFromStyle(node, axis) {\n    // The parent already computed us a width or height. We just skip it\n    if (!isUndefined(node.layout[dim[axis]])) {\n      return;\n    }\n    // We only run if there's a width or height defined\n    if (!isDimDefined(node, axis)) {\n      return;\n    }\n\n    // The dimensions can never be smaller than the padding and border\n    node.layout[dim[axis]] = fmaxf(\n      node.style[dim[axis]],\n      getPaddingAndBorderAxis(node, axis)\n    );\n  }\n\n  // If both left and right are defined, then use left. Otherwise return\n  // +left or -right depending on which is defined.\n  function getRelativePosition(node, axis) {\n    if (leading[axis] in node.style) {\n      return getPosition(node, leading[axis]);\n    }\n    return -getPosition(node, trailing[axis]);\n  }\n\n  var leading = {\n    row: 'left',\n    column: 'top'\n  };\n  var trailing = {\n    row: 'right',\n    column: 'bottom'\n  };\n  var pos = {\n    row: 'left',\n    column: 'top'\n  };\n  var dim = {\n    row: 'width',\n    column: 'height'\n  };\n\n  function fmaxf(a, b) {\n    if (a > b) {\n      return a;\n    }\n    return b;\n  }\n\n  var CSS_UNDEFINED = undefined;\n\n  var CSS_FLEX_DIRECTION_ROW = 'row';\n  var CSS_FLEX_DIRECTION_COLUMN = 'column';\n\n  var CSS_JUSTIFY_FLEX_START = 'flex-start';\n  var CSS_JUSTIFY_CENTER = 'center';\n  var CSS_JUSTIFY_FLEX_END = 'flex-end';\n  var CSS_JUSTIFY_SPACE_BETWEEN = 'space-between';\n  var CSS_JUSTIFY_SPACE_AROUND = 'space-around';\n\n  var CSS_ALIGN_FLEX_START = 'flex-start';\n  var CSS_ALIGN_CENTER = 'center';\n  var CSS_ALIGN_FLEX_END = 'flex-end';\n  var CSS_ALIGN_STRETCH = 'stretch';\n\n  var CSS_POSITION_RELATIVE = 'relative';\n  var CSS_POSITION_ABSOLUTE = 'absolute';\n\n  return function layoutNode(node, parentMaxWidth) {\n    var/*css_flex_direction_t*/ mainAxis = getFlexDirection(node);\n    var/*css_flex_direction_t*/ crossAxis = mainAxis === CSS_FLEX_DIRECTION_ROW ?\n      CSS_FLEX_DIRECTION_COLUMN :\n      CSS_FLEX_DIRECTION_ROW;\n\n    // Handle width and height style attributes\n    setDimensionFromStyle(node, mainAxis);\n    setDimensionFromStyle(node, crossAxis);\n\n    // The position is set by the parent, but we need to complete it with a\n    // delta composed of the margin and left/top/right/bottom\n    node.layout[leading[mainAxis]] += getMargin(node, leading[mainAxis]) +\n      getRelativePosition(node, mainAxis);\n    node.layout[leading[crossAxis]] += getMargin(node, leading[crossAxis]) +\n      getRelativePosition(node, crossAxis);\n\n    if (isMeasureDefined(node)) {\n      var/*float*/ width = CSS_UNDEFINED;\n      if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n        width = node.style.width;\n      } else if (!isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_ROW]])) {\n        width = node.layout[dim[CSS_FLEX_DIRECTION_ROW]];\n      } else {\n        width = parentMaxWidth -\n          getMarginAxis(node, CSS_FLEX_DIRECTION_ROW);\n      }\n      width -= getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n\n      // We only need to give a dimension for the text if we haven't got any\n      // for it computed yet. It can either be from the style attribute or because\n      // the element is flexible.\n      var/*bool*/ isRowUndefined = !isDimDefined(node, CSS_FLEX_DIRECTION_ROW) &&\n        isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_ROW]]);\n      var/*bool*/ isColumnUndefined = !isDimDefined(node, CSS_FLEX_DIRECTION_COLUMN) &&\n        isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_COLUMN]]);\n\n      // Let's not measure the text if we already know both dimensions\n      if (isRowUndefined || isColumnUndefined) {\n        var/*css_dim_t*/ measure_dim = node.style.measure(\n          /*(c)!node->context,*/\n          width\n        );\n        if (isRowUndefined) {\n          node.layout.width = measure_dim.width +\n            getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n        }\n        if (isColumnUndefined) {\n          node.layout.height = measure_dim.height +\n            getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_COLUMN);\n        }\n      }\n      return;\n    }\n\n    // Pre-fill some dimensions straight from the parent\n    for (var/*int*/ i = 0; i < node.children.length; ++i) {\n      var/*css_node_t**/ child = node.children[i];\n      // Pre-fill cross axis dimensions when the child is using stretch before\n      // we call the recursive layout pass\n      if (getAlignItem(node, child) === CSS_ALIGN_STRETCH &&\n          getPositionType(child) === CSS_POSITION_RELATIVE &&\n          !isUndefined(node.layout[dim[crossAxis]]) &&\n          !isDimDefined(child, crossAxis)) {\n        child.layout[dim[crossAxis]] = fmaxf(\n          node.layout[dim[crossAxis]] -\n            getPaddingAndBorderAxis(node, crossAxis) -\n            getMarginAxis(child, crossAxis),\n          // You never want to go smaller than padding\n          getPaddingAndBorderAxis(child, crossAxis)\n        );\n      } else if (getPositionType(child) == CSS_POSITION_ABSOLUTE) {\n        // Pre-fill dimensions when using absolute position and both offsets for the axis are defined (either both\n        // left and right or top and bottom).\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii != 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (!isUndefined(node.layout[dim[axis]]) &&\n              !isDimDefined(child, axis) &&\n              isPosDefined(child, leading[axis]) &&\n              isPosDefined(child, trailing[axis])) {\n            child.layout[dim[axis]] = fmaxf(\n              node.layout[dim[axis]] -\n              getPaddingAndBorderAxis(node, axis) -\n              getMarginAxis(child, axis) -\n              getPosition(child, leading[axis]) -\n              getPosition(child, trailing[axis]),\n              // You never want to go smaller than padding\n              getPaddingAndBorderAxis(child, axis)\n            );\n          }\n        }\n      }\n    }\n\n    var/*float*/ definedMainDim = CSS_UNDEFINED;\n    if (!isUndefined(node.layout[dim[mainAxis]])) {\n      definedMainDim = node.layout[dim[mainAxis]] -\n          getPaddingAndBorderAxis(node, mainAxis);\n    }\n\n    // We want to execute the next two loops one per line with flex-wrap\n    var/*int*/ startLine = 0;\n    var/*int*/ endLine = 0;\n    var/*int*/ nextOffset = 0;\n    var/*int*/ alreadyComputedNextLayout = 0;\n    // We aggregate the total dimensions of the container in those two variables\n    var/*float*/ linesCrossDim = 0;\n    var/*float*/ linesMainDim = 0;\n    while (endLine < node.children.length) {\n      // <Loop A> Layout non flexible children and count children by type\n\n      // mainContentDim is accumulation of the dimensions and margin of all the\n      // non flexible children. This will be used in order to either set the\n      // dimensions of the node if none already exist, or to compute the\n      // remaining space left for the flexible children.\n      var/*float*/ mainContentDim = 0;\n\n      // There are three kind of children, non flexible, flexible and absolute.\n      // We need to know how many there are in order to distribute the space.\n      var/*int*/ flexibleChildrenCount = 0;\n      var/*float*/ totalFlexible = 0;\n      var/*int*/ nonFlexibleChildrenCount = 0;\n      for (var/*int*/ i = startLine; i < node.children.length; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n        var/*float*/ nextContentDim = 0;\n\n        // It only makes sense to consider a child flexible if we have a computed\n        // dimension for the node.\n        if (!isUndefined(node.layout[dim[mainAxis]]) && isFlex(child)) {\n          flexibleChildrenCount++;\n          totalFlexible += getFlex(child);\n\n          // Even if we don't know its exact size yet, we already know the padding,\n          // border and margin. We'll use this partial information to compute the\n          // remaining space.\n          nextContentDim = getPaddingAndBorderAxis(child, mainAxis) +\n            getMarginAxis(child, mainAxis);\n\n        } else {\n          var/*float*/ maxWidth = CSS_UNDEFINED;\n          if (mainAxis === CSS_FLEX_DIRECTION_ROW) {\n            // do nothing\n          } else if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n            maxWidth = node.layout[dim[CSS_FLEX_DIRECTION_ROW]] -\n              getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n          } else {\n            maxWidth = parentMaxWidth -\n              getMarginAxis(node, CSS_FLEX_DIRECTION_ROW) -\n              getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n          }\n\n          // This is the main recursive call. We layout non flexible children.\n          if (alreadyComputedNextLayout === 0) {\n            layoutNode(child, maxWidth);\n          }\n\n          // Absolute positioned elements do not take part of the layout, so we\n          // don't use them to compute mainContentDim\n          if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n            nonFlexibleChildrenCount++;\n            // At this point we know the final size and margin of the element.\n            nextContentDim = getDimWithMargin(child, mainAxis);\n          }\n        }\n\n        // The element we are about to add would make us go to the next line\n        if (isFlexWrap(node) &&\n            !isUndefined(node.layout[dim[mainAxis]]) &&\n            mainContentDim + nextContentDim > definedMainDim &&\n            // If there's only one element, then it's bigger than the content\n            // and needs its own line\n            i !== startLine) {\n          alreadyComputedNextLayout = 1;\n          break;\n        }\n        alreadyComputedNextLayout = 0;\n        mainContentDim += nextContentDim;\n        endLine = i + 1;\n      }\n\n      // <Loop B> Layout flexible children and allocate empty space\n\n      // In order to position the elements in the main axis, we have two\n      // controls. The space between the beginning and the first element\n      // and the space between each two elements.\n      var/*float*/ leadingMainDim = 0;\n      var/*float*/ betweenMainDim = 0;\n\n      // The remaining available space that needs to be allocated\n      var/*float*/ remainingMainDim = 0;\n      if (!isUndefined(node.layout[dim[mainAxis]])) {\n        remainingMainDim = definedMainDim - mainContentDim;\n      } else {\n        remainingMainDim = fmaxf(mainContentDim, 0) - mainContentDim;\n      }\n\n      // If there are flexible children in the mix, they are going to fill the\n      // remaining space\n      if (flexibleChildrenCount !== 0) {\n        var/*float*/ flexibleMainDim = remainingMainDim / totalFlexible;\n\n        // The non flexible children can overflow the container, in this case\n        // we should just assume that there is no space available.\n        if (flexibleMainDim < 0) {\n          flexibleMainDim = 0;\n        }\n        // We iterate over the full array and only apply the action on flexible\n        // children. This is faster than actually allocating a new array that\n        // contains only flexible children.\n        for (var/*int*/ i = startLine; i < endLine; ++i) {\n          var/*css_node_t**/ child = node.children[i];\n          if (isFlex(child)) {\n            // At this point we know the final size of the element in the main\n            // dimension\n            child.layout[dim[mainAxis]] = flexibleMainDim * getFlex(child) +\n              getPaddingAndBorderAxis(child, mainAxis);\n\n            var/*float*/ maxWidth = CSS_UNDEFINED;\n            if (mainAxis === CSS_FLEX_DIRECTION_ROW) {\n              // do nothing\n            } else if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n              maxWidth = node.layout[dim[CSS_FLEX_DIRECTION_ROW]] -\n                getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n            } else {\n              maxWidth = parentMaxWidth -\n                getMarginAxis(node, CSS_FLEX_DIRECTION_ROW) -\n                getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n            }\n\n            // And we recursively call the layout algorithm for this child\n            layoutNode(child, maxWidth);\n          }\n        }\n\n      // We use justifyContent to figure out how to allocate the remaining\n      // space available\n      } else {\n        var/*css_justify_t*/ justifyContent = getJustifyContent(node);\n        if (justifyContent === CSS_JUSTIFY_FLEX_START) {\n          // Do nothing\n        } else if (justifyContent === CSS_JUSTIFY_CENTER) {\n          leadingMainDim = remainingMainDim / 2;\n        } else if (justifyContent === CSS_JUSTIFY_FLEX_END) {\n          leadingMainDim = remainingMainDim;\n        } else if (justifyContent === CSS_JUSTIFY_SPACE_BETWEEN) {\n          remainingMainDim = fmaxf(remainingMainDim, 0);\n          if (flexibleChildrenCount + nonFlexibleChildrenCount - 1 !== 0) {\n            betweenMainDim = remainingMainDim /\n              (flexibleChildrenCount + nonFlexibleChildrenCount - 1);\n          } else {\n            betweenMainDim = 0;\n          }\n        } else if (justifyContent === CSS_JUSTIFY_SPACE_AROUND) {\n          // Space on the edges is half of the space between elements\n          betweenMainDim = remainingMainDim /\n            (flexibleChildrenCount + nonFlexibleChildrenCount);\n          leadingMainDim = betweenMainDim / 2;\n        }\n      }\n\n      // <Loop C> Position elements in the main axis and compute dimensions\n\n      // At this point, all the children have their dimensions set. We need to\n      // find their position. In order to do that, we accumulate data in\n      // variables that are also useful to compute the total dimensions of the\n      // container!\n      var/*float*/ crossDim = 0;\n      var/*float*/ mainDim = leadingMainDim +\n        getPaddingAndBorder(node, leading[mainAxis]);\n\n      for (var/*int*/ i = startLine; i < endLine; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n\n        if (getPositionType(child) === CSS_POSITION_ABSOLUTE &&\n            isPosDefined(child, leading[mainAxis])) {\n          // In case the child is position absolute and has left/top being\n          // defined, we override the position to whatever the user said\n          // (and margin/border).\n          child.layout[pos[mainAxis]] = getPosition(child, leading[mainAxis]) +\n            getBorder(node, leading[mainAxis]) +\n            getMargin(child, leading[mainAxis]);\n        } else {\n          // If the child is position absolute (without top/left) or relative,\n          // we put it at the current accumulated offset.\n          child.layout[pos[mainAxis]] += mainDim;\n        }\n\n        // Now that we placed the element, we need to update the variables\n        // We only need to do that for relative elements. Absolute elements\n        // do not take part in that phase.\n        if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n          // The main dimension is the sum of all the elements dimension plus\n          // the spacing.\n          mainDim += betweenMainDim + getDimWithMargin(child, mainAxis);\n          // The cross dimension is the max of the elements dimension since there\n          // can only be one element in that cross dimension.\n          crossDim = fmaxf(crossDim, getDimWithMargin(child, crossAxis));\n        }\n      }\n\n      var/*float*/ containerMainAxis = node.layout[dim[mainAxis]];\n      // If the user didn't specify a width or height, and it has not been set\n      // by the container, then we set it via the children.\n      if (isUndefined(node.layout[dim[mainAxis]])) {\n        containerMainAxis = fmaxf(\n          // We're missing the last padding at this point to get the final\n          // dimension\n          mainDim + getPaddingAndBorder(node, trailing[mainAxis]),\n          // We can never assign a width smaller than the padding and borders\n          getPaddingAndBorderAxis(node, mainAxis)\n        );\n      }\n\n      var/*float*/ containerCrossAxis = node.layout[dim[crossAxis]];\n      if (isUndefined(node.layout[dim[crossAxis]])) {\n        containerCrossAxis = fmaxf(\n          // For the cross dim, we add both sides at the end because the value\n          // is aggregate via a max function. Intermediate negative values\n          // can mess this computation otherwise\n          crossDim + getPaddingAndBorderAxis(node, crossAxis),\n          getPaddingAndBorderAxis(node, crossAxis)\n        );\n      }\n\n      // <Loop D> Position elements in the cross axis\n\n      for (var/*int*/ i = startLine; i < endLine; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n\n        if (getPositionType(child) === CSS_POSITION_ABSOLUTE &&\n            isPosDefined(child, leading[crossAxis])) {\n          // In case the child is absolutely positionned and has a\n          // top/left/bottom/right being set, we override all the previously\n          // computed positions to set it correctly.\n          child.layout[pos[crossAxis]] = getPosition(child, leading[crossAxis]) +\n            getBorder(node, leading[crossAxis]) +\n            getMargin(child, leading[crossAxis]);\n\n        } else {\n          var/*float*/ leadingCrossDim = getPaddingAndBorder(node, leading[crossAxis]);\n\n          // For a relative children, we're either using alignItems (parent) or\n          // alignSelf (child) in order to determine the position in the cross axis\n          if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n            var/*css_align_t*/ alignItem = getAlignItem(node, child);\n            if (alignItem === CSS_ALIGN_FLEX_START) {\n              // Do nothing\n            } else if (alignItem === CSS_ALIGN_STRETCH) {\n              // You can only stretch if the dimension has not already been set\n              // previously.\n              if (!isDimDefined(child, crossAxis)) {\n                child.layout[dim[crossAxis]] = fmaxf(\n                  containerCrossAxis -\n                    getPaddingAndBorderAxis(node, crossAxis) -\n                    getMarginAxis(child, crossAxis),\n                  // You never want to go smaller than padding\n                  getPaddingAndBorderAxis(child, crossAxis)\n                );\n              }\n            } else {\n              // The remaining space between the parent dimensions+padding and child\n              // dimensions+margin.\n              var/*float*/ remainingCrossDim = containerCrossAxis -\n                getPaddingAndBorderAxis(node, crossAxis) -\n                getDimWithMargin(child, crossAxis);\n\n              if (alignItem === CSS_ALIGN_CENTER) {\n                leadingCrossDim += remainingCrossDim / 2;\n              } else { // CSS_ALIGN_FLEX_END\n                leadingCrossDim += remainingCrossDim;\n              }\n            }\n          }\n\n          // And we apply the position\n          child.layout[pos[crossAxis]] += linesCrossDim + leadingCrossDim;\n        }\n      }\n\n      linesCrossDim += crossDim;\n      linesMainDim = fmaxf(linesMainDim, mainDim);\n      startLine = endLine;\n    }\n\n    // If the user didn't specify a width or height, and it has not been set\n    // by the container, then we set it via the children.\n    if (isUndefined(node.layout[dim[mainAxis]])) {\n      node.layout[dim[mainAxis]] = fmaxf(\n        // We're missing the last padding at this point to get the final\n        // dimension\n        linesMainDim + getPaddingAndBorder(node, trailing[mainAxis]),\n        // We can never assign a width smaller than the padding and borders\n        getPaddingAndBorderAxis(node, mainAxis)\n      );\n    }\n\n    if (isUndefined(node.layout[dim[crossAxis]])) {\n      node.layout[dim[crossAxis]] = fmaxf(\n        // For the cross dim, we add both sides at the end because the value\n        // is aggregate via a max function. Intermediate negative values\n        // can mess this computation otherwise\n        linesCrossDim + getPaddingAndBorderAxis(node, crossAxis),\n        getPaddingAndBorderAxis(node, crossAxis)\n      );\n    }\n\n    // <Loop E> Calculate dimensions for absolutely positioned elements\n\n    for (var/*int*/ i = 0; i < node.children.length; ++i) {\n      var/*css_node_t**/ child = node.children[i];\n      if (getPositionType(child) == CSS_POSITION_ABSOLUTE) {\n        // Pre-fill dimensions when using absolute position and both offsets for the axis are defined (either both\n        // left and right or top and bottom).\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii !== 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (!isUndefined(node.layout[dim[axis]]) &&\n              !isDimDefined(child, axis) &&\n              isPosDefined(child, leading[axis]) &&\n              isPosDefined(child, trailing[axis])) {\n            child.layout[dim[axis]] = fmaxf(\n              node.layout[dim[axis]] -\n              getPaddingAndBorderAxis(node, axis) -\n              getMarginAxis(child, axis) -\n              getPosition(child, leading[axis]) -\n              getPosition(child, trailing[axis]),\n              // You never want to go smaller than padding\n              getPaddingAndBorderAxis(child, axis)\n            );\n          }\n        }\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii !== 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (isPosDefined(child, trailing[axis]) &&\n              !isPosDefined(child, leading[axis])) {\n            child.layout[leading[axis]] =\n              node.layout[dim[axis]] -\n              child.layout[dim[axis]] -\n              getPosition(child, trailing[axis]);\n          }\n        }\n      }\n    }\n  };\n})();\n\nexport default computeLayout","// https://github.com/Flipboard/react-canvas\n\n/**\nCopyright (c) 2015, Flipboard\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice, this\n  list of conditions and the following disclaimer in the documentation and/or\n  other materials provided with the distribution.\n\n* Neither the name of Flipboard nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n'use strict';\n\nimport  computeLayout  from './layout';\n\n/**\n * This computes the CSS layout for a RenderLayer tree and mutates the frame\n * objects at each node.\n *\n * @param {Renderlayer} root\n * @return {Object}\n */\nfunction layoutNode (root) {\n  var rootNode = createNode(root);\n  computeLayout(rootNode);\n  walkNode(rootNode);\n  return rootNode;\n}\n\nfunction createNode (layer) {\n  return {\n    layer: layer,\n    layout: {\n      width: undefined, // computeLayout will mutate\n      height: undefined, // computeLayout will mutate\n      top: 0,\n      left: 0,\n    },\n    style: (layer.attributes && layer.attributes.style) || {},\n    children: (layer.children || []).map(createNode)\n  };\n}\n\nfunction walkNode (node, parentLeft, parentTop) {\n  node.layer.frame.x = node.layout.left + (parentLeft || 0);\n  node.layer.frame.y = node.layout.top + (parentTop || 0);\n  node.layer.frame.width = node.layout.width;\n  node.layer.frame.height = node.layout.height;\n  if (node.children && node.children.length > 0) {\n    node.children.forEach(function (child) {\n      walkNode(child, node.layer.frame.x, node.layer.frame.y);\n    });\n  }\n}\n\nexport default layoutNode;","const stack = []\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation\n * of the structure of a DOM tree. This structure can be realized by recursively comparing it against\n * the current _actual_ DOM structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string} nodeName\tAn element name. Ex: `div`, `a`, `span`, etc.\n * @param {Object} attributes\tAny attributes/props to set on the created element.\n * @param rest\t\t\tAdditional arguments are taken to be children to append. Can be infinitely nested Arrays.\n *\n * @public\n */\nexport function h(type, attributes) {\n  let children = [],\n    lastSimple,\n    child,\n    simple,\n    i\n  for (i = arguments.length; i-- > 2;) {\n    stack.push(arguments[i])\n  }\n  if (attributes && attributes.children != null) {\n    if (!stack.length) stack.push(attributes.children)\n    delete attributes.children\n  }\n\n  let p = {}\n  if (type !== 'text') {\n    while (stack.length) {\n      if ((child = stack.pop()) && child.pop !== undefined) {\n        for (i = child.length; i--;) stack.push(child[i])\n      } else {\n        if (typeof child === 'boolean') child = null\n\n        if ((simple = typeof type !== 'function')) {\n          if (child == null) child = ''\n          else if (typeof child === 'number') child = String(child)\n          else if (typeof child !== 'string') simple = false\n        }\n\n        if (simple && lastSimple) {\n          children[children.length - 1] += child\n        } else if (children.length === 0) {\n          children = [child]\n        } else {\n          children.push(child)\n        }\n\n        lastSimple = simple\n      }\n    }\n  } else {\n    p.value = stack.pop()\n  }\n\n\n\n  p.type = type\n  p.frame = {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 0,\n    \"height\": 0\n  }\n  p.children = children\n  p.attributes = attributes == null ? undefined : attributes\n  p.key = attributes == null ? undefined : attributes.key\n\n\n  return p\n}\n","// render modes\n\nexport const NO_RENDER = 0\nexport const SYNC_RENDER = 1\nexport const FORCE_RENDER = 2\nexport const ASYNC_RENDER = 3\n\nexport const ATTR_KEY = '__omiattr_'\n\n// DOM properties that should NOT have \"px\" added when numeric\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i\n","let nodeId = 1\nexport function uniqueId() {\n  return nodeId++\n}\n\nlet docMap = {}\n\nexport function addDoc(id, doc) {\n  docMap[id] = doc\n}\n\nexport function getDoc(id) {\n  return docMap[id]\n}\n\nexport function removeDoc(id) {\n  delete docMap[id]\n}\n\nlet sendBridgeFlag = {}\n\nexport function getSendBridgeFlag() {\n  return sendBridgeFlag\n}\n\nexport function setSendBridgeFlag(docId, flag) {\n  return (sendBridgeFlag[docId] = flag)\n}\n\nexport function insertIndex(target, list, newIndex) {\n  if (newIndex < 0) {\n    newIndex = 0\n  }\n  const before = list[newIndex - 1]\n  const after = list[newIndex]\n  list.splice(newIndex, 0, target)\n\n  before && (before.nextSibling = target)\n  target.previousSibling = before\n  target.nextSibling = after\n  after && (after.previousSibling = target)\n\n  return newIndex\n}\n\nexport function moveIndex(target, list, newIndex) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return -1\n  }\n\n  const before = list[index - 1]\n  const after = list[index + 1]\n  before && (before.nextSibling = after)\n  after && (after.previousSibling = before)\n\n  list.splice(index, 1)\n  let newIndexAfter = newIndex\n  if (index <= newIndex) {\n    newIndexAfter = newIndex - 1\n  }\n  const beforeNew = list[newIndexAfter - 1]\n  const afterNew = list[newIndexAfter]\n  list.splice(newIndexAfter, 0, target)\n\n  beforeNew && (beforeNew.nextSibling = target)\n  target.previousSibling = beforeNew\n  target.nextSibling = afterNew\n  afterNew && (afterNew.previousSibling = target)\n\n  if (index === newIndexAfter) {\n    return -1\n  }\n  return newIndex\n}\n\nexport function removeIndex(target, list, changeSibling) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return\n  }\n  if (changeSibling) {\n    const before = list[index - 1]\n    const after = list[index + 1]\n    before && (before.nextSibling = after)\n    after && (after.previousSibling = before)\n  }\n  list.splice(index, 1)\n}\n\nexport function remove(target, list) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return\n  }\n\n  const before = list[index - 1]\n  const after = list[index + 1]\n  before && (before.nextSibling = after)\n  after && (after.previousSibling = before)\n\n  list.splice(index, 1)\n}\n\nexport function linkParent(node, parent) {\n  node.parentNode = parent\n  if (parent.docId) {\n    node.docId = parent.docId\n    node.ownerDocument = parent.ownerDocument\n    node.ownerDocument.nodeMap[node.nodeId] = node\n    node.depth = parent.depth + 1\n\t}\n\n  node.childNodes && node.childNodes.forEach(child => {\n    linkParent(child, node)\n  })\n}\n\nexport function nextElement(node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.nextSibling\n  }\n}\n\nexport function previousElement(node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.previousSibling\n  }\n}\n","import {\n\tgetDoc,\n\tuniqueId,\n\tlinkParent,\n\tinsertIndex,\n\tmoveIndex,\n\tremoveIndex\n} from './util'\n\nconst displayMap = {\n\tdiv: 'block',\n\tspan: 'inline-block'\n}\n\nfunction registerNode(docId, node) {\n\tconst doc = getDoc(docId)\n\tdoc.nodeMap[node.nodeId] = node\n}\n\nexport default class Element {\n\tconstructor(type) {\n\t\tthis.nodeType = 1\n\t\tthis.nodeId = uniqueId()\n\t\tthis.ref = this.nodeId\n\t\tthis.type = type\n\t\tthis.attributes = {}\n\t\tthis.style = {\n\t\t\tdisplay: displayMap[type]\n\t\t}\n\t\tthis.classStyle = {}\n\t\tthis.event = {}\n\t\tthis.childNodes = []\n\n\t\tthis.nodeName = this.type\n\n\t\tthis.parentNode = null\n\t\tthis.nextSibling = null\n\t\tthis.previousSibling = null\n\t\tthis.firstChild = null\n\t}\n\n\tappendChild(node) {\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tinsertIndex(node, this.childNodes, this.childNodes.length, true)\n\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), -1)\n\n\t\t} else {\n\t\t\tnode.parentNode.removeChild(node)\n\n\t\t\tthis.appendChild(node)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\n\n\t}\n\n\tinsertBefore(node, before) {\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tconst index = insertIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(before),\n\t\t\t\ttrue\n\t\t\t)\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), index)\n\n\t\t} else {\n\t\t\tnode.parentNode.removeChild(node)\n\t\t\tthis.insertBefore(node, before)\n\t\t\treturn\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tinsertAfter(node, after) {\n\t\tif (node.parentNode && node.parentNode !== this) {\n\t\t\treturn\n\t\t}\n\t\tif (\n\t\t\tnode === after ||\n\t\t\t(node.previousSibling && node.previousSibling === after)\n\t\t) {\n\t\t\treturn\n\t\t}\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tconst index = insertIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(after) + 1,\n\t\t\t\ttrue\n\t\t\t)\n\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), index)\n\n\t\t} else {\n\t\t\tconst index = moveIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(after) + 1\n\t\t\t)\n\n\t\t\t//this.ownerDocument.moveElement(node.ref, this.ref, index)\n\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tremoveChild(node) {\n\t\tif (node.parentNode) {\n\t\t\tremoveIndex(node, this.childNodes, true)\n\n\n\t\t\tthis.ownerDocument.removeElement(node.ref)\n\n\t\t}\n\n\t\tnode.parentNode = null\n\n\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tsetAttribute(key, value, silent) {\n\t\tif (this.attributes[key] === value && silent !== false) {\n\t\t\treturn\n\t\t}\n\t\tthis.attributes[key] = value\n\t\tif (!silent) {\n\t\t\tconst result = {}\n\t\t\tresult[key] = value\n\n\t\t\tthis.ownerDocument.setAttr(this.ref, result)\n\n\t\t}\n\t}\n\n\tremoveAttribute(key) {\n\t\tif (this.attributes[key]) {\n\t\t\tdelete this.attributes[key]\n\t\t}\n\t}\n\n\tsetStyle(key, value, silent) {\n\t\tif (this.style[key] === value && silent !== false) {\n\t\t\treturn\n\t\t}\n\t\tthis.style[key] = value\n\t\tif (!silent && this.ownerDocument) {\n\t\t\tconst result = {}\n\t\t\tresult[key] = value\n\n\t\t\tthis.ownerDocument.setStyles(this.ref, result)\n\n\t\t}\n\t}\n\n\tsetStyles(styles) {\n\t\tObject.assign(this.style, styles)\n\t\tif (this.ownerDocument) {\n\n\t\t\tthis.ownerDocument.setStyles(this.ref, styles)\n\n\t\t}\n\t}\n\n\tsetClassStyle(classStyle) {\n\t\tfor (const key in this.classStyle) {\n\t\t\tthis.classStyle[key] = ''\n\t\t}\n\n\t\tObject.assign(this.classStyle, classStyle)\n\n\n\t\tthis.ownerDocument.setStyles(this.ref, this.toStyle())\n\n\t}\n\n\taddEventListener(type, handler) {\n\t\tif (!this.event[type]) {\n\t\t\tthis.event[type] = handler\n\n\t\t\t//this.ownerDocument.addEvent(this.ref, type)\n\t\t}\n\t}\n\n\tremoveEventListener(type) {\n\t\tif (this.event[type]) {\n\t\t\tdelete this.event[type]\n\t\t\tlet doc = getDoc(this.docId)\n\t\t\tdoc.nodeMap[this.ref] &&\n\t\t\t\tdoc.nodeMap[this.ref].event &&\n\t\t\t\tdoc.nodeMap[this.ref].event[type]\n\t\t\t\t? (doc.nodeMap[this.ref].event[type] = null)\n\t\t\t\t: ''\n\n\t\t\tthis.ownerDocument.removeEvent(this.ref, type)\n\t\t}\n\t}\n\n\tfireEvent(type, e) {\n\t\tconst handler = this.event[type]\n\t\tif (handler) {\n\t\t\treturn handler.call(this, e)\n\t\t}\n\t}\n\n\ttoStyle() {\n\t\treturn Object.assign({}, this.classStyle, this.style)\n\t}\n\n\tgetComputedStyle() { }\n\n\ttoJSON() {\n\t\tlet result = {\n\t\t\tid: this.ref,\n\t\t\ttype: this.type,\n\t\t\tdocId: this.docId || -10000,\n\t\t\tattributes: this.attributes ? this.attributes : {}\n\t\t}\n\t\tresult.attributes.style = this.toStyle()\n\n\t\tconst event = Object.keys(this.event)\n\t\tif (event.length) {\n\t\t\tresult.event = event\n\t\t}\n\n\t\tif (this.childNodes.length) {\n\t\t\tresult.children = this.childNodes.map(child => child.toJSON())\n\t\t}\n\t\treturn result\n\t}\n\n\treplaceChild(newChild, oldChild) {\n\t\tthis.insertBefore(newChild, oldChild)\n\t\tthis.removeChild(oldChild)\n\t}\n\n\tdestroy() {\n\t\tconst doc = getDoc(this.docId)\n\n\t\tif (doc) {\n\t\t\tdelete doc.nodeMap[this.nodeId]\n\t\t}\n\n\t\tthis.parentNode = null\n\t\tthis.childNodes.forEach(child => {\n\t\t\tchild.destroy()\n\t\t})\n\t}\n}\n","import {\n\tgetDoc,\n\tuniqueId\n} from './util'\n\n\nfunction registerNode(docId, node) {\n\tconst doc = getDoc(docId)\n\tdoc.nodeMap[node.nodeId] = node\n}\n\nexport default class TextNode {\n\tconstructor(nodeValue) {\n\t\tthis.nodeType = 3\n\t\tthis.nodeId = uniqueId()\n\t\tthis.ref = this.nodeId\n\t\tthis.attributes = {}\n\t\tthis.style = {\n\t\t\tdisplay: 'inline'\n\t\t}\n\t\tthis.classStyle = {}\n\t\tthis.event = {}\n\t\tthis.nodeValue = nodeValue\n\t\tthis.parentNode = null\n\t\tthis.nextSibling = null\n\t\tthis.previousSibling = null\n\t\tthis.firstChild = null\n\t\tthis.type = 'text'\n\t}\n\n\tsetAttribute(key, value, silent) {\n\t\tif (this.attributes[key] === value && silent !== false) {\n\t\t\treturn\n\t\t}\n\t\tthis.attributes[key] = value\n\t\tif (!silent) {\n\t\t\tconst result = {}\n\t\t\tresult[key] = value\n\n\t\t\tthis.ownerDocument.setAttr(this.ref, result)\n\n\t\t}\n\t}\n\n\tremoveAttribute(key) {\n\t\tif (this.attributes[key]) {\n\t\t\tdelete this.attributes[key]\n\t\t}\n\t}\n\n\ttoStyle() {\n\t\treturn Object.assign({}, this.classStyle, this.style)\n\t}\n\n\tsplitText() {\n\n\t}\n\n\tgetComputedStyle() { }\n\n\ttoJSON() {\n\t\tlet result = {\n\t\t\tid: this.ref,\n\t\t\ttype: this.type,\n\t\t\tdocId: this.docId || -10000,\n\t\t\tattributes: this.attributes ? this.attributes : {}\n\t\t}\n\t\tresult.attributes.style = this.toStyle()\n\n\t\tconst event = Object.keys(this.event)\n\t\tif (event.length) {\n\t\t\tresult.event = event\n\t\t}\n\n\t\treturn result\n\t}\n\n\tdestroy() {\n\t\tconst doc = getDoc(this.docId)\n\n\t\tif (doc) {\n\t\t\tdelete doc.nodeMap[this.nodeId]\n\t\t}\n\n\t\tthis.parentNode = null\n\n\t}\n}\n","import Element from './element'\nimport TextNode from './text-node'\nimport { addDoc, removeDoc } from './util'\n\n\nexport default class Document {\n  constructor(id) {\n    this.id = id\n    addDoc(id, this)\n    this.nodeMap = {}\n    this._isMockDocument = true\n  }\n\n  // createBody(type, props) {\n  //   if (!this.body) {\n  //     const el = new Element(type, props)\n  //     el.didMount = true\n  //     el.ownerDocument = this\n  //     el.docId = this.id\n  //     el.style.alignItems = 'flex-start'\n  //     this.body = el\n  //   }\n\n  //   return this.body\n  // }\n\n  createElement(tagName, props) {\n    let el = new Element(tagName, props)\n    el.ownerDocument = this\n    el.docId = this.id\n    return el\n\t}\n\n\tcreateTextNode(txt){\n\t\tconst node = new TextNode(txt)\n\t\tnode.docId = this.id\n\t\treturn node\n\t}\n\n  destroy() {\n    delete this.listener\n    delete this.nodeMap\n    removeDoc(this.id)\n  }\n\n  addEventListener(ref, type) {\n    //document.addEvent(this.id, ref, type)\n  }\n\n  removeEventListener(ref, type) {\n    //document.removeEvent(this.id, ref, type)\n  }\n\n\n  scrollTo(ref, x, y, animated) {\n    document.scrollTo(this.id, ref, x, y, animated)\n  }\n\n}\n","import Document from './document'\n\n\nexport default {\n\tdocument: new Document(0)\n}\n","import mock from './mock/index'\n\nfunction getGlobal() {\n  if (\n    typeof global !== 'object' ||\n    !global ||\n    global.Math !== Math ||\n    global.Array !== Array\n  ) {\n    if (typeof self !== 'undefined') {\n      return self\n    } else if (typeof window !== 'undefined') {\n      return window\n    } else if (typeof global !== 'undefined') {\n      return global\n    }\n    return (function() {\n      return this\n    })()\n  }\n  return global\n}\n\n/** Global options\n *\t@public\n *\t@namespace options {Object}\n */\nexport default {\n  scopedStyle: true,\n  mapping: {},\n  isWeb: true,\n\tstaticStyleMapping: {},\n\tdoc: mock.document,\n  //doc: typeof document === 'object' ? document : null,\n  root: getGlobal(),\n  //styleCache :[{ctor:ctor,ctorName:ctorName,style:style}]\n  styleCache: []\n  //componentChange(component, element) { },\n  /** If `true`, `prop` changes trigger synchronous component updates.\n   *\t@name syncComponentUpdates\n   *\t@type Boolean\n   *\t@default true\n   */\n  //syncComponentUpdates: true,\n\n  /** Processes all created VNodes.\n   *\t@param {VNode} vnode\tA newly-created VNode to normalize/process\n   */\n  //vnode(vnode) { }\n\n  /** Hook invoked after a component is mounted. */\n  //afterMount(component) { },\n\n  /** Hook invoked after the DOM is updated with a component's latest render. */\n  //afterUpdate(component) { }\n\n  /** Hook invoked immediately before a component is unmounted. */\n  // beforeUnmount(component) { }\n}\n","'use strict'\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols\nvar hasOwnProperty = Object.prototype.hasOwnProperty\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined')\n  }\n\n  return Object(val)\n}\n\nexport function assign(target, source) {\n  var from\n  var to = toObject(target)\n  var symbols\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s])\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key]\n      }\n    }\n\n    if (getOwnPropertySymbols) {\n      symbols = getOwnPropertySymbols(from)\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]]\n        }\n      }\n    }\n  }\n\n  return to\n}\n\nif (typeof Element !== 'undefined' && !Element.prototype.addEventListener) {\n  var oListeners = {};\n  function runListeners(oEvent) {\n    if (!oEvent) { oEvent = window.event; }\n    for (var iLstId = 0, iElId = 0, oEvtListeners = oListeners[oEvent.type]; iElId < oEvtListeners.aEls.length; iElId++) {\n      if (oEvtListeners.aEls[iElId] === this) {\n        for (iLstId; iLstId < oEvtListeners.aEvts[iElId].length; iLstId++) { oEvtListeners.aEvts[iElId][iLstId].call(this, oEvent); }\n        break;\n      }\n    }\n  }\n  Element.prototype.addEventListener = function (sEventType, fListener /*, useCapture (will be ignored!) */) {\n    if (oListeners.hasOwnProperty(sEventType)) {\n      var oEvtListeners = oListeners[sEventType];\n      for (var nElIdx = -1, iElId = 0; iElId < oEvtListeners.aEls.length; iElId++) {\n        if (oEvtListeners.aEls[iElId] === this) { nElIdx = iElId; break; }\n      }\n      if (nElIdx === -1) {\n        oEvtListeners.aEls.push(this);\n        oEvtListeners.aEvts.push([fListener]);\n        this[\"on\" + sEventType] = runListeners;\n      } else {\n        var aElListeners = oEvtListeners.aEvts[nElIdx];\n        if (this[\"on\" + sEventType] !== runListeners) {\n          aElListeners.splice(0);\n          this[\"on\" + sEventType] = runListeners;\n        }\n        for (var iLstId = 0; iLstId < aElListeners.length; iLstId++) {\n          if (aElListeners[iLstId] === fListener) { return; }\n        }\n        aElListeners.push(fListener);\n      }\n    } else {\n      oListeners[sEventType] = { aEls: [this], aEvts: [[fListener]] };\n      this[\"on\" + sEventType] = runListeners;\n    }\n  };\n  Element.prototype.removeEventListener = function (sEventType, fListener /*, useCapture (will be ignored!) */) {\n    if (!oListeners.hasOwnProperty(sEventType)) { return; }\n    var oEvtListeners = oListeners[sEventType];\n    for (var nElIdx = -1, iElId = 0; iElId < oEvtListeners.aEls.length; iElId++) {\n      if (oEvtListeners.aEls[iElId] === this) { nElIdx = iElId; break; }\n    }\n    if (nElIdx === -1) { return; }\n    for (var iLstId = 0, aElListeners = oEvtListeners.aEvts[nElIdx]; iLstId < aElListeners.length; iLstId++) {\n      if (aElListeners[iLstId] === fListener) { aElListeners.splice(iLstId, 1); }\n    }\n  };\n}\n\n\nif (typeof Object.create !== 'function') {\n  Object.create = function(proto, propertiesObject) {\n    if (typeof proto !== 'object' && typeof proto !== 'function') {\n      throw new TypeError('Object prototype may only be an Object: ' + proto)\n    } else if (proto === null) {\n      throw new Error(\n        \"This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.\"\n      )\n    }\n\n    // if (typeof propertiesObject != 'undefined') {\n    //     throw new Error(\"This browser's implementation of Object.create is a shim and doesn't support a second argument.\");\n    // }\n\n    function F() {}\n    F.prototype = proto\n\n    return new F()\n  }\n}\n\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n  }\n}\n\n/**\n *  Copy all properties from `props` onto `obj`.\n *  @param {Object} obj\t\tObject onto which properties should be copied.\n *  @param {Object} props\tObject from which to copy properties.\n *  @returns obj\n *  @private\n */\nexport function extend(obj, props) {\n  for (let i in props) obj[i] = props[i]\n  return obj\n}\n\n/** Invoke or update a ref, depending on whether it is a function or object ref.\n *  @param {object|function} [ref=null]\n *  @param {any} [value]\n */\nexport function applyRef(ref, value) {\n  if (ref) {\n    if (typeof ref == 'function') ref(value)\n    else ref.current = value\n  }\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n *\n * @param {Function} callback\n */\n\nlet usePromise = typeof Promise == 'function'\n\n// for native\nif (\n  typeof document !== 'object' &&\n  typeof global !== 'undefined' &&\n  global.__config__\n) {\n  if (global.__config__.platform === 'android') {\n    usePromise = true\n  } else {\n    let systemVersion =\n      (global.__config__.systemVersion &&\n        global.__config__.systemVersion.split('.')[0]) ||\n      0\n    if (systemVersion > 8) {\n      usePromise = true\n    }\n  }\n}\n\nexport const defer = usePromise\n  ? Promise.resolve().then.bind(Promise.resolve())\n  : setTimeout\n\nexport function isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nexport function nProps(props) {\n  if (!props || isArray(props)) return {}\n  const result = {}\n  Object.keys(props).forEach(key => {\n    result[key] = props[key].value\n  })\n  return result\n}\n\nexport function getUse(data, paths) {\n  const obj = []\n  paths.forEach((path, index) => {\n    const isPath = typeof path === 'string'\n    if (isPath) {\n      obj[index] = getTargetByPath(data, path)\n    } else {\n      const key = Object.keys(path)[0]\n      const value = path[key]\n      if (typeof value === 'string') {\n        obj[index] = getTargetByPath(data, value)\n      } else {\n        const tempPath = value[0]\n        if (typeof tempPath === 'string') {\n          const tempVal = getTargetByPath(data, tempPath)\n          obj[index] = value[1] ? value[1](tempVal) : tempVal\n        } else {\n          const args = []\n          tempPath.forEach(path =>{\n            args.push(getTargetByPath(data, path))\n          })\n          obj[index] = value[1].apply(null, args)\n        }\n      }\n      obj[key] = obj[index]\n    }\n  })\n  return obj\n}\n\nexport function getTargetByPath(origin, path) {\n  const arr = path.replace(/]/g, '').replace(/\\[/g, '.').split('.')\n  let current = origin\n  for (let i = 0, len = arr.length; i < len; i++) {\n    current = current[arr[i]]\n  }\n  return current\n}\n","import options from './options'\nimport { defer } from './util'\nimport { renderComponent } from './vdom/component'\n\n/** Managed queue of dirty components to be re-rendered */\n\nlet items = []\n\nexport function enqueueRender(component) {\n  if (items.push(component) == 1) {\n    ;(options.debounceRendering || defer)(rerender)\n  }\n}\n\n/** Rerender all enqueued dirty components */\nexport function rerender() {\n\tlet p\n\twhile ( (p = items.pop()) ) {\n    renderComponent(p)\n\t}\n}","import { extend } from '../util'\nimport options from '../options'\n\nconst mapping = options.mapping\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node\t\t\tDOM Node to compare\n * @param {VNode} vnode\t\t\tVirtual DOM node to compare\n * @param {boolean} [hydrating=false]\tIf true, ignores component constructors when comparing.\n * @private\n */\nexport function isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined\n  }\n  if (typeof vnode.nodeName === 'string') {\n    var ctor = mapping[vnode.nodeName]\n    if (ctor) {\n      return hydrating || node._componentConstructor === ctor\n    }\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName)\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node\tA DOM Element to inspect the name of.\n * @param {String} nodeName\tUnnormalized name to compare against.\n */\nexport function isNamedNode(node, nodeName) {\n  return (\n    node.normalizedNodeName === nodeName ||\n    node.nodeName.toLowerCase() === nodeName.toLowerCase()\n  )\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nexport function getNodeProps(vnode) {\n  let props = extend({}, vnode.attributes)\n  props.children = vnode.children\n\n  let defaultProps = vnode.nodeName.defaultProps\n  if (defaultProps !== undefined) {\n    for (let i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i]\n      }\n    }\n  }\n\n  return props\n}\n","import { IS_NON_DIMENSIONAL } from '../constants'\nimport { applyRef } from '../util'\nimport options from '../options'\n\n/** Create an element with the given nodeName.\n *\t@param {String} nodeName\n *\t@param {Boolean} [isSvg=false]\tIf `true`, creates an element within the SVG namespace.\n *\t@returns {Element} node\n */\nexport function createNode(nodeName, isSvg) {\n  let node = isSvg\n    ? options.doc.createElementNS('http://www.w3.org/2000/svg', nodeName)\n    : options.doc.createElement(nodeName)\n  node.normalizedNodeName = nodeName\n  return node\n}\n\nfunction parseCSSText(cssText) {\n  let cssTxt = cssText.replace(/\\/\\*(.|\\s)*?\\*\\//g, ' ').replace(/\\s+/g, ' ')\n  let style = {},\n    [a, b, rule] = cssTxt.match(/ ?(.*?) ?{([^}]*)}/) || [a, b, cssTxt]\n  let cssToJs = s => s.replace(/\\W+\\w/g, match => match.slice(-1).toUpperCase())\n  let properties = rule\n    .split(';')\n    .map(o => o.split(':').map(x => x && x.trim()))\n  for (let [property, value] of properties) style[cssToJs(property)] = value\n  return style\n}\n\n/** Remove a child node from its parent if attached.\n *\t@param {Element} node\t\tThe node to remove\n */\nexport function removeNode(node) {\n  let parentNode = node.parentNode\n  if (parentNode) parentNode.removeChild(node)\n}\n\n/** Set a named attribute on the given Node, with special behavior for some names and event handlers.\n *\tIf `value` is `null`, the attribute/handler will be removed.\n *\t@param {Element} node\tAn element to mutate\n *\t@param {string} name\tThe name/key to set, such as an event or attribute name\n *\t@param {any} old\tThe last value that was set for this name/node pair\n *\t@param {any} value\tAn attribute value, such as a function to be used as an event handler\n *\t@param {Boolean} isSvg\tAre we currently diffing inside an svg?\n *\t@private\n */\nexport function setAccessor(node, name, old, value, isSvg) {\n  if (name === 'className') name = 'class'\n\n  if (name === 'key') {\n    // ignore\n  } else if (name === 'ref') {\n    applyRef(old, null)\n    applyRef(value, node)\n  } else if (name === 'class' && !isSvg) {\n    node.className = value || ''\n  } else if (name === 'style') {\n    if (options.isWeb) {\n      if (!value || typeof value === 'string' || typeof old === 'string') {\n        node.style.cssText = value || ''\n      }\n      if (value && typeof value === 'object') {\n        if (typeof old !== 'string') {\n          for (let i in old) if (!(i in value)) node.style[i] = ''\n        }\n        for (let i in value) {\n          node.style[i] =\n            typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false\n              ? value[i] + 'px'\n              : value[i]\n        }\n      }\n    } else {\n      let oldJson = old,\n        currentJson = value\n      if (typeof old === 'string') {\n        oldJson = parseCSSText(old)\n      }\n      if (typeof value == 'string') {\n        currentJson = parseCSSText(value)\n      }\n\n      let result = {},\n        changed = false\n\n      if (oldJson) {\n        for (let key in oldJson) {\n          if (typeof currentJson == 'object' && !(key in currentJson)) {\n            result[key] = ''\n            changed = true\n          }\n        }\n\n        for (let ckey in currentJson) {\n          if (currentJson[ckey] !== oldJson[ckey]) {\n            result[ckey] = currentJson[ckey]\n            changed = true\n          }\n        }\n\n        if (changed) {\n          node.setStyles(result)\n        }\n      } else {\n        node.setStyles(currentJson)\n      }\n    }\n  } else if (name === 'dangerouslySetInnerHTML') {\n    if (value) node.innerHTML = value.__html || ''\n  } else if (name[0] == 'o' && name[1] == 'n') {\n    let useCapture = name !== (name = name.replace(/Capture$/, ''))\n    name = name.toLowerCase().substring(2)\n    if (value) {\n      if (!old) {\n        node.addEventListener(name, eventProxy, useCapture)\n        if (name == 'tap') {\n          node.addEventListener('touchstart', touchStart, useCapture)\n          node.addEventListener('touchend', touchEnd, useCapture)\n        }\n      }\n    } else {\n      node.removeEventListener(name, eventProxy, useCapture)\n      if (name == 'tap') {\n        node.removeEventListener('touchstart', touchStart, useCapture)\n        node.removeEventListener('touchend', touchEnd, useCapture)\n      }\n    }\n    ;(node._listeners || (node._listeners = {}))[name] = value\n  } else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n    setProperty(node, name, value == null ? '' : value)\n    if (value == null || value === false) node.removeAttribute(name)\n  } else {\n    let ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''))\n    if (value == null || value === false) {\n      if (ns)\n        node.removeAttributeNS(\n          'http://www.w3.org/1999/xlink',\n          name.toLowerCase()\n        )\n      else node.removeAttribute(name)\n    } else if (typeof value !== 'function') {\n      if (ns)\n        node.setAttributeNS(\n          'http://www.w3.org/1999/xlink',\n          name.toLowerCase(),\n          value\n        )\n      else node.setAttribute(name, value)\n    }\n  }\n}\n\n/** Attempt to set a DOM property to the given value.\n *\tIE & FF throw for certain property-value combinations.\n */\nfunction setProperty(node, name, value) {\n  try {\n    node[name] = value\n  } catch (e) {}\n}\n\n/** Proxy an event to hooked event handlers\n *\t@private\n */\nfunction eventProxy(e) {\n  return this._listeners[e.type]((options.event && options.event(e)) || e)\n}\n\nfunction touchStart(e) {\n  this.___touchX = e.touches[0].pageX\n  this.___touchY = e.touches[0].pageY\n  this.___scrollTop = document.body.scrollTop\n}\n\nfunction touchEnd(e) {\n  if (\n    Math.abs(e.changedTouches[0].pageX - this.___touchX) < 30 &&\n    Math.abs(e.changedTouches[0].pageY - this.___touchY) < 30 &&\n    Math.abs(document.body.scrollTop - this.___scrollTop) < 30\n  ) {\n    this.dispatchEvent(new CustomEvent('tap', { detail: e }))\n  }\n}","export function draw(res){\n  console.log(res)\n  return document.createElement('canvas')\n}","import { ATTR_KEY } from '../constants'\nimport { isSameNodeType, isNamedNode } from './index'\nimport { buildComponentFromVNode } from './component'\nimport { createNode, setAccessor } from '../dom/index'\nimport { unmountComponent } from './component'\nimport options from '../options'\nimport { applyRef } from '../util'\nimport { removeNode } from '../dom/index'\nimport { isArray } from '../util'\nimport { draw } from '../../cax/draw'\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nexport const mounts = []\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nexport let diffLevel = 0\n\n/** Global flag indicating if the diff is currently within an SVG */\nlet isSvgMode = false\n\n/** Global flag indicating if the diff is performing hydration */\nlet hydrating = false\n\n/** Invoke queued componentDidMount lifecycle methods */\nexport function flushMounts() {\n  let c\n  while ((c = mounts.pop())) {\n    if (options.afterMount) options.afterMount(c)\n    if (c.installed) c.installed()\n  }\n}\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *\t@param {Element} [dom=null]\t\tA DOM node to mutate into the shape of the `vnode`\n *\t@param {VNode} vnode\t\t\tA VNode (with descendants forming a tree) representing the desired DOM structure\n *\t@returns {Element} dom\t\t\tThe created/mutated element\n *\t@private\n */\nexport function diff(dom, vnode, context, mountAll, parent, componentRoot, fromRender) {\n  // diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n  if (!diffLevel++) {\n    // when first starting the diff, check if we're diffing an SVG or within an SVG\n    isSvgMode = parent != null && parent.ownerSVGElement !== undefined\n\n    // hydration is indicated by the existing element to be diffed not having a prop cache\n    hydrating = dom != null && !(ATTR_KEY in dom)\n  }\n  let ret\n\n  if (isArray(vnode)) {\n    vnode = {\n      nodeName: 'span',\n      children: vnode\n    }\n  }\n\n\tret = idiff(dom, vnode, context, mountAll, componentRoot)\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode !== parent) {\n\t\tif (fromRender) {\n\t\t\tparent.appendChild(draw(ret))\n\t\t} else {\n\t\t\tparent.appendChild(ret)\n\t\t}\n\t}\n\n  // diffLevel being reduced to 0 means we're exiting the diff\n  if (!--diffLevel) {\n    hydrating = false\n    // invoke queued componentDidMount lifecycle methods\n    if (!componentRoot) flushMounts()\n  }\n\n  return ret\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n  let out = dom,\n    prevSvgMode = isSvgMode\n\n  // empty values (null, undefined, booleans) render as empty Text nodes\n  if (vnode == null || typeof vnode === 'boolean') vnode = ''\n\n  // If the VNode represents a Component, perform a component diff:\n  let vnodeName = vnode.nodeName\n  if (options.mapping[vnodeName]) {\n    vnode.nodeName = options.mapping[vnodeName]\n    return buildComponentFromVNode(dom, vnode, context, mountAll)\n  }\n  if (typeof vnodeName == 'function') {\n    return buildComponentFromVNode(dom, vnode, context, mountAll)\n  }\n\n  // Fast case: Strings & Numbers create/update Text nodes.\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    // update if it's already a Text node:\n    if (\n      dom &&\n      dom.splitText !== undefined &&\n      dom.parentNode &&\n      (!dom._component || componentRoot)\n    ) {\n      /* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n      if (dom.nodeValue != vnode) {\n        dom.nodeValue = vnode\n      }\n    } else {\n      // it wasn't a Text node: replace it with one and recycle the old Element\n      out = options.doc.createTextNode(vnode)\n      if (dom) {\n        if (dom.parentNode) dom.parentNode.replaceChild(out, dom)\n        recollectNodeTree(dom, true)\n      }\n    }\n\n    //ie8 error\n    try {\n      out[ATTR_KEY] = true\n    } catch (e) {}\n\n    return out\n  }\n\n  // Tracks entering and exiting SVG namespace when descending through the tree.\n  isSvgMode =\n    vnodeName === 'svg'\n      ? true\n      : vnodeName === 'foreignObject'\n      ? false\n      : isSvgMode\n\n  // If there's no existing element or it's the wrong type, create a new one:\n  vnodeName = String(vnodeName)\n  if (!dom || !isNamedNode(dom, vnodeName)) {\n    out = createNode(vnodeName, isSvgMode)\n\n    if (dom) {\n      // move children into the replacement node\n      while (dom.firstChild) out.appendChild(dom.firstChild)\n\n      // if the previous Element was mounted into the DOM, replace it inline\n      if (dom.parentNode) dom.parentNode.replaceChild(out, dom)\n\n      // recycle the old element (skips non-Element node types)\n      recollectNodeTree(dom, true)\n    }\n  }\n\n  let fc = out.firstChild,\n    props = out[ATTR_KEY],\n    vchildren = vnode.children\n\n  if (props == null) {\n    props = out[ATTR_KEY] = {}\n    for (let a = out.attributes, i = a.length; i--; )\n      props[a[i].name] = a[i].value\n  }\n\n  // Optimization: fast-path for elements containing a single TextNode:\n  if (\n    !hydrating &&\n    vchildren &&\n    vchildren.length === 1 &&\n    typeof vchildren[0] === 'string' &&\n    fc != null &&\n    fc.splitText !== undefined &&\n    fc.nextSibling == null\n  ) {\n    if (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0]\n\t\t\t//update rendering obj\n\t\t\tfc._renderText.text = fc.nodeValue\n    }\n  }\n  // otherwise, if there are existing or new children, diff them:\n  else if ((vchildren && vchildren.length) || fc != null) {\n    innerDiffNode(\n      out,\n      vchildren,\n      context,\n      mountAll,\n      hydrating || props.dangerouslySetInnerHTML != null\n    )\n  }\n\n  // Apply attributes/props from VNode to the DOM Element:\n  diffAttributes(out, vnode.attributes, props)\n\n  // restore previous SVG mode: (in case we're exiting an SVG namespace)\n  isSvgMode = prevSvgMode\n\n  return out\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *\t@param {Element} dom\t\t\tElement whose children should be compared & mutated\n *\t@param {Array} vchildren\t\tArray of VNodes to compare to `dom.childNodes`\n *\t@param {Object} context\t\t\tImplicitly descendant context object (from most recent `getChildContext()`)\n *\t@param {Boolean} mountAll\n *\t@param {Boolean} isHydrating\tIf `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n  let originalChildren = dom.childNodes,\n    children = [],\n    keyed = {},\n    keyedLen = 0,\n    min = 0,\n    len = originalChildren.length,\n    childrenLen = 0,\n    vlen = vchildren ? vchildren.length : 0,\n    j,\n    c,\n    f,\n    vchild,\n    child\n\n  // Build up a map of keyed children and an Array of unkeyed children:\n  if (len !== 0) {\n    for (let i = 0; i < len; i++) {\n      let child = originalChildren[i],\n        props = child[ATTR_KEY],\n        key =\n          vlen && props\n            ? child._component\n              ? child._component.__key\n              : props.key\n            : null\n      if (key != null) {\n        keyedLen++\n        keyed[key] = child\n      } else if (\n        props ||\n        (child.splitText !== undefined\n          ? isHydrating\n            ? child.nodeValue.trim()\n            : true\n          : isHydrating)\n      ) {\n        children[childrenLen++] = child\n      }\n    }\n  }\n\n  if (vlen !== 0) {\n    for (let i = 0; i < vlen; i++) {\n      vchild = vchildren[i]\n      child = null\n\n      // attempt to find a node based on key matching\n      let key = vchild.key\n      if (key != null) {\n        if (keyedLen && keyed[key] !== undefined) {\n          child = keyed[key]\n          keyed[key] = undefined\n          keyedLen--\n        }\n      }\n      // attempt to pluck a node of the same type from the existing children\n      else if (!child && min < childrenLen) {\n        for (j = min; j < childrenLen; j++) {\n          if (\n            children[j] !== undefined &&\n            isSameNodeType((c = children[j]), vchild, isHydrating)\n          ) {\n            child = c\n            children[j] = undefined\n            if (j === childrenLen - 1) childrenLen--\n            if (j === min) min++\n            break\n          }\n        }\n      }\n\n      // morph the matched/found/created DOM child to match vchild (deep)\n      child = idiff(child, vchild, context, mountAll)\n\n      f = originalChildren[i]\n      if (child && child !== dom && child !== f) {\n        if (f == null) {\n\t\t\t\t\tdom.appendChild(child)\n        } else if (child === f.nextSibling) {\n          removeNode(f)\n        } else {\n          dom.insertBefore(child, f)\n        }\n      }\n    }\n  }\n\n  // remove unused keyed children:\n  if (keyedLen) {\n    for (let i in keyed)\n      if (keyed[i] !== undefined) recollectNodeTree(keyed[i], false)\n  }\n\n\t// remove orphaned unkeyed children:\n  while (min <= childrenLen) {\n    if ((child = children[childrenLen--]) !== undefined)\n      recollectNodeTree(child, false)\n  }\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n  let component = node._component\n  if (component) {\n    // if node is owned by a Component, unmount that component (ends up recursing back here)\n    unmountComponent(component)\n  } else {\n    // If the node's VNode had a ref function, invoke it with null here.\n    // (this is part of the React spec, and smart for unsetting references)\n    if (node[ATTR_KEY] != null) applyRef(node[ATTR_KEY].ref, null)\n\n    if (unmountOnly === false || node[ATTR_KEY] == null) {\n      removeNode(node)\n    }\n\n    removeChildren(node)\n  }\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n  node = node.lastChild\n  while (node) {\n    let next = node.previousSibling\n    recollectNodeTree(node, true)\n    node = next\n  }\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *\t@param {Element} dom\t\tElement with attributes to diff `attrs` against\n *\t@param {Object} attrs\t\tThe desired end-state key-value attribute pairs\n *\t@param {Object} old\t\t\tCurrent/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n  let name\n\n  // remove attributes no longer present on the vnode by setting them to undefined\n  for (name in old) {\n    if (!(attrs && attrs[name] != null) && old[name] != null) {\n      setAccessor(dom, name, old[name], (old[name] = undefined), isSvgMode)\n    }\n  }\n\n  // add new & update changed attributes\n  for (name in attrs) {\n    if (\n      name !== 'children' &&\n      name !== 'innerHTML' &&\n      (!(name in old) ||\n        attrs[name] !==\n          (name === 'value' || name === 'checked' ? dom[name] : old[name]))\n    ) {\n      setAccessor(dom, name, old[name], (old[name] = attrs[name]), isSvgMode)\n    }\n  }\n}\n","import options from './options'\n\nconst OBJECTTYPE = '[object Object]'\nconst ARRAYTYPE = '[object Array]'\n\nexport function define(name, ctor) {\n  options.mapping[name] = ctor\n  if (ctor.use) {\n    ctor.updatePath = getPath(ctor.use)\n  } else if (ctor.data) { //Compatible with older versions\n    ctor.updatePath = getUpdatePath(ctor.data)\n  }\n}\n\nexport function getPath(obj) {\n  if (Object.prototype.toString.call(obj) === '[object Array]') {\n    const result = {}\n    obj.forEach(item => {\n      if (typeof item === 'string') {\n        result[item] = true\n      } else {\n        const tempPath = item[Object.keys(item)[0]]\n        if (typeof tempPath === 'string') {\n          result[tempPath] = true\n        } else {\n          if(typeof tempPath[0] === 'string'){\n            result[tempPath[0]] = true\n          }else{\n            tempPath[0].forEach(path => result[path] = true)\n          }\n        }\n      }\n    })\n    return result\n  } else {\n    return getUpdatePath(obj)\n  }\n}\n\nexport function getUpdatePath(data) {\n  const result = {}\n  dataToPath(data, result)\n  return result\n}\n\nfunction dataToPath(data, result) {\n  Object.keys(data).forEach(key => {\n    result[key] = true\n    const type = Object.prototype.toString.call(data[key])\n    if (type === OBJECTTYPE) {\n      _objToPath(data[key], key, result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(data[key], key, result)\n    }\n  })\n}\n\nfunction _objToPath(data, path, result) {\n  Object.keys(data).forEach(key => {\n    result[path + '.' + key] = true\n    delete result[path]\n    const type = Object.prototype.toString.call(data[key])\n    if (type === OBJECTTYPE) {\n      _objToPath(data[key], path + '.' + key, result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(data[key], path + '.' + key, result)\n    }\n  })\n}\n\nfunction _arrayToPath(data, path, result) {\n  data.forEach((item, index) => {\n    result[path + '[' + index + ']'] = true\n    delete result[path]\n    const type = Object.prototype.toString.call(item)\n    if (type === OBJECTTYPE) {\n      _objToPath(item, path + '[' + index + ']', result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(item, path + '[' + index + ']', result)\n    }\n  })\n}\n","import Component from '../component'\nimport { getUse } from '../util'\nimport { getPath } from  '../define'\n/** Retains a pool of Components for re-use, keyed on component name.\n *\tNote: since component names are not unique or even necessarily available, these are primarily a form of sharding.\n *\t@private\n */\nconst components = {}\n\n/** Reclaim a component for later re-use by the recycler. */\nexport function collectComponent(component) {\n  let name = component.constructor.name\n  ;(components[name] || (components[name] = [])).push(component)\n}\n\n/** Create a component. Normalizes differences between PFC's and classful Components. */\nexport function createComponent(Ctor, props, context, vnode) {\n  let list = components[Ctor.name],\n    inst\n\n  if (Ctor.prototype && Ctor.prototype.render) {\n    inst = new Ctor(props, context)\n    Component.call(inst, props, context)\n  } else {\n    inst = new Component(props, context)\n    inst.constructor = Ctor\n    inst.render = doRender\n  }\n  vnode && (inst.scopedCssAttr = vnode.css)\n\n  if ( inst.store && inst.store.data) {\n\t\tif(inst.constructor.use){\n\t\t\tinst.use = getUse(inst.store.data, inst.constructor.use)\n\t\t\tinst.store.instances.push(inst)\n\t\t} else if(inst.initUse){\n\t\t\tconst use = inst.initUse()\n\t\t\tinst._updatePath = getPath(use)\n\t\t\tinst.use = getUse(inst.store.data, use)\n\t\t\tinst.store.instances.push(inst)\n\t\t}\n\n\n  }\n\n  if (list) {\n    for (let i = list.length; i--; ) {\n      if (list[i].constructor === Ctor) {\n        inst.nextBase = list[i].nextBase\n        list.splice(i, 1)\n        break\n      }\n    }\n  }\n  return inst\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, data, context) {\n  return this.constructor(props, context)\n}\n","import options from './options'\n\nlet styleId = 0\n\nexport function getCtorName(ctor) {\n  for (let i = 0, len = options.styleCache.length; i < len; i++) {\n    let item = options.styleCache[i]\n\n    if (item.ctor === ctor) {\n      return item.attrName\n    }\n  }\n\n  let attrName = 's' + styleId\n  options.styleCache.push({ ctor, attrName })\n  styleId++\n\n  return attrName\n}\n\n// many thanks to https://github.com/thomaspark/scoper/\nexport function scoper(css, prefix) {\n  prefix = '[' + prefix.toLowerCase() + ']'\n  // https://www.w3.org/TR/css-syntax-3/#lexical\n  css = css.replace(/\\/\\*[^*]*\\*+([^/][^*]*\\*+)*\\//g, '')\n  // eslint-disable-next-line\n    let re = new RegExp('([^\\r\\n,{}:]+)(:[^\\r\\n,{}]+)?(,(?=[^{}]*{)|\\s*{)', 'g')\n  /**\n   * Example:\n   *\n   * .classname::pesudo { color:red }\n   *\n   * g1 is normal selector `.classname`\n   * g2 is pesudo class or pesudo element\n   * g3 is the suffix\n   */\n  css = css.replace(re, (g0, g1, g2, g3) => {\n    if (typeof g2 === 'undefined') {\n      g2 = ''\n    }\n\n    /* eslint-ignore-next-line */\n    if (\n      g1.match(\n        /^\\s*(@media|\\d+%?|@-webkit-keyframes|@keyframes|to|from|@font-face)/\n      )\n    ) {\n      return g1 + g2 + g3\n    }\n\n    let appendClass = g1.replace(/(\\s*)$/, '') + prefix + g2\n    //let prependClass = prefix + ' ' + g1.trim() + g2;\n\n    return appendClass + g3\n    //return appendClass + ',' + prependClass + g3;\n  })\n\n  return css\n}\n\nexport function addStyle(cssText, id) {\n  id = id.toLowerCase()\n  let ele = document.getElementById(id)\n  let head = document.getElementsByTagName('head')[0]\n  if (ele && ele.parentNode === head) {\n    head.removeChild(ele)\n  }\n\n  let someThingStyles = document.createElement('style')\n  head.appendChild(someThingStyles)\n  someThingStyles.setAttribute('type', 'text/css')\n  someThingStyles.setAttribute('id', id)\n  if (window.ActiveXObject) {\n    someThingStyles.styleSheet.cssText = cssText\n  } else {\n    someThingStyles.textContent = cssText\n  }\n}\n\nexport function addStyleWithoutId(cssText) {\n  let head = document.getElementsByTagName('head')[0]\n  let someThingStyles = document.createElement('style')\n  head.appendChild(someThingStyles)\n  someThingStyles.setAttribute('type', 'text/css')\n\n  if (window.ActiveXObject) {\n    someThingStyles.styleSheet.cssText = cssText\n  } else {\n    someThingStyles.textContent = cssText\n  }\n}\n\nexport function addScopedAttrStatic(vdom, attr) {\n  if (options.scopedStyle) {\n    scopeVdom(attr, vdom)\n  } \n}\n\nexport function addStyleToHead(style, attr) {\n  if (options.scopedStyle) {\n    if (!options.staticStyleMapping[attr]) {\n      addStyle(scoper(style, attr), attr)\n      options.staticStyleMapping[attr] = true\n    }\n  } else if (!options.staticStyleMapping[attr]) {\n    addStyleWithoutId(style)\n    options.staticStyleMapping[attr] = true\n  }\n}\n\nexport function scopeVdom(attr, vdom) {\n  if (typeof vdom === 'object') {\n    vdom.attributes = vdom.attributes || {}\n    vdom.attributes[attr] = ''\n    vdom.css = vdom.css || {}\n    vdom.css[attr] = ''\n    vdom.children.forEach(child => scopeVdom(attr, child))\n  }\n}\n\nexport function scopeHost(vdom, css) {\n  if (typeof vdom === 'object' && css) {\n    vdom.attributes = vdom.attributes || {}\n    for (let key in css) {\n      vdom.attributes[key] = ''\n    }\n  }\n}\n","/* obaa 1.0.0\n * By dntzhang\n * Github: https://github.com/Tencent/omi\n * MIT Licensed.\n */\n\nvar obaa = function(target, arr, callback) {\n  var _observe = function(target, arr, callback) {\n    if (!target.$observer) target.$observer = this\n    var $observer = target.$observer\n    var eventPropArr = []\n    if (obaa.isArray(target)) {\n      if (target.length === 0) {\n        target.$observeProps = {}\n        target.$observeProps.$observerPath = '#'\n      }\n      $observer.mock(target)\n    }\n    for (var prop in target) {\n      if (target.hasOwnProperty(prop)) {\n        if (callback) {\n          if (obaa.isArray(arr) && obaa.isInArray(arr, prop)) {\n            eventPropArr.push(prop)\n            $observer.watch(target, prop)\n          } else if (obaa.isString(arr) && prop == arr) {\n            eventPropArr.push(prop)\n            $observer.watch(target, prop)\n          }\n        } else {\n          eventPropArr.push(prop)\n          $observer.watch(target, prop)\n        }\n      }\n    }\n    $observer.target = target\n    if (!$observer.propertyChangedHandler) $observer.propertyChangedHandler = []\n    var propChanged = callback ? callback : arr\n    $observer.propertyChangedHandler.push({\n      all: !callback,\n      propChanged: propChanged,\n      eventPropArr: eventPropArr\n    })\n  }\n  _observe.prototype = {\n    onPropertyChanged: function(prop, value, oldValue, target, path) {\n      if (value !== oldValue && this.propertyChangedHandler) {\n        var rootName = obaa._getRootName(prop, path)\n        for (\n          var i = 0, len = this.propertyChangedHandler.length;\n          i < len;\n          i++\n        ) {\n          var handler = this.propertyChangedHandler[i]\n          if (\n            handler.all ||\n            obaa.isInArray(handler.eventPropArr, rootName) ||\n            rootName.indexOf('Array-') === 0\n          ) {\n            handler.propChanged.call(this.target, prop, value, oldValue, path)\n          }\n        }\n      }\n      if (prop.indexOf('Array-') !== 0 && typeof value === 'object') {\n        this.watch(target, prop, target.$observeProps.$observerPath)\n      }\n    },\n    mock: function(target) {\n      var self = this\n      obaa.methods.forEach(function(item) {\n        target[item] = function() {\n          var old = Array.prototype.slice.call(this, 0)\n          var result = Array.prototype[item].apply(\n            this,\n            Array.prototype.slice.call(arguments)\n          )\n          if (new RegExp('\\\\b' + item + '\\\\b').test(obaa.triggerStr)) {\n            for (var cprop in this) {\n              if (this.hasOwnProperty(cprop) && !obaa.isFunction(this[cprop])) {\n                self.watch(this, cprop, this.$observeProps.$observerPath)\n              }\n            }\n            //todo\n            self.onPropertyChanged(\n              'Array-' + item,\n              this,\n              old,\n              this,\n              this.$observeProps.$observerPath\n            )\n          }\n          return result\n        }\n        target[\n          'pure' + item.substring(0, 1).toUpperCase() + item.substring(1)\n        ] = function() {\n          return Array.prototype[item].apply(\n            this,\n            Array.prototype.slice.call(arguments)\n          )\n        }\n      })\n    },\n    watch: function(target, prop, path) {\n      if (prop === '$observeProps' || prop === '$observer') return\n      if (obaa.isFunction(target[prop])) return\n      if (!target.$observeProps) target.$observeProps = {}\n      if (path !== undefined) {\n        target.$observeProps.$observerPath = path\n      } else {\n        target.$observeProps.$observerPath = '#'\n      }\n      var self = this\n      var currentValue = (target.$observeProps[prop] = target[prop])\n      Object.defineProperty(target, prop, {\n        get: function() {\n          return this.$observeProps[prop]\n        },\n        set: function(value) {\n          var old = this.$observeProps[prop]\n          this.$observeProps[prop] = value\n          self.onPropertyChanged(\n            prop,\n            value,\n            old,\n            this,\n            target.$observeProps.$observerPath\n          )\n        }\n      })\n      if (typeof currentValue == 'object') {\n        if (obaa.isArray(currentValue)) {\n          this.mock(currentValue)\n          if (currentValue.length === 0) {\n            if (!currentValue.$observeProps) currentValue.$observeProps = {}\n            if (path !== undefined) {\n              currentValue.$observeProps.$observerPath = path\n            } else {\n              currentValue.$observeProps.$observerPath = '#'\n            }\n          }\n        }\n        for (var cprop in currentValue) {\n          if (currentValue.hasOwnProperty(cprop)) {\n            this.watch(\n              currentValue,\n              cprop,\n              target.$observeProps.$observerPath + '-' + prop\n            )\n          }\n        }\n      }\n    }\n  }\n  return new _observe(target, arr, callback)\n}\n\nobaa.methods = [\n  'concat',\n  'copyWithin',\n  'entries',\n  'every',\n  'fill',\n  'filter',\n  'find',\n  'findIndex',\n  'forEach',\n  'includes',\n  'indexOf',\n  'join',\n  'keys',\n  'lastIndexOf',\n  'map',\n  'pop',\n  'push',\n  'reduce',\n  'reduceRight',\n  'reverse',\n  'shift',\n  'slice',\n  'some',\n  'sort',\n  'splice',\n  'toLocaleString',\n  'toString',\n  'unshift',\n  'values',\n  'size'\n]\nobaa.triggerStr = [\n  'concat',\n  'copyWithin',\n  'fill',\n  'pop',\n  'push',\n  'reverse',\n  'shift',\n  'sort',\n  'splice',\n  'unshift',\n  'size'\n].join(',')\n\nobaa.isArray = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nobaa.isString = function(obj) {\n  return typeof obj === 'string'\n}\n\nobaa.isInArray = function(arr, item) {\n  for (var i = arr.length; --i > -1; ) {\n    if (item === arr[i]) return true\n  }\n  return false\n}\n\nobaa.isFunction = function(obj) {\n  return Object.prototype.toString.call(obj) == '[object Function]'\n}\n\nobaa._getRootName = function(prop, path) {\n  if (path === '#') {\n    return prop\n  }\n  return path.split('-')[1]\n}\n\nobaa.add = function(obj, prop) {\n  var $observer = obj.$observer\n  $observer.watch(obj, prop)\n}\n\nobaa.set = function(obj, prop, value, exec) {\n  if (!exec) {\n    obj[prop] = value\n  }\n  var $observer = obj.$observer\n  $observer.watch(obj, prop)\n  if (exec) {\n    obj[prop] = value\n  }\n}\n\nArray.prototype.size = function(length) {\n  this.length = length\n}\n\nexport default obaa\n","const callbacks = []\nconst nextTickCallback = []\n\nexport function tick(fn, scope) {\n  callbacks.push({ fn, scope })\n}\n\nexport function fireTick() {\n  callbacks.forEach(item => {\n    item.fn.call(item.scope)\n  })\n\n  nextTickCallback.forEach(nextItem => {\n    nextItem.fn.call(nextItem.scope)\n  })\n  nextTickCallback.length = 0\n}\n\nexport function nextTick(fn, scope) {\n  nextTickCallback.push({ fn, scope })\n}\n","import obaa from './obaa'\nimport { fireTick } from './tick'\n\nexport function proxyUpdate(ele) {\n  let timeout = null\n  obaa(ele.data, () => {\n    if (ele._willUpdate) {\n      return\n    }\n    if (ele.constructor.mergeUpdate) {\n      clearTimeout(timeout)\n\n      timeout = setTimeout(() => {\n        ele.update()\n        fireTick()\n      }, 0)\n    } else {\n      ele.update()\n      fireTick()\n    }\n  })\n}\n","import {\n  SYNC_RENDER,\n  NO_RENDER,\n  FORCE_RENDER,\n  ASYNC_RENDER,\n  ATTR_KEY\n} from '../constants'\nimport options from '../options'\nimport { extend, applyRef } from '../util'\nimport { enqueueRender } from '../render-queue'\nimport { getNodeProps } from './index'\nimport {\n  diff,\n  mounts,\n  diffLevel,\n  flushMounts,\n  recollectNodeTree,\n  removeChildren\n} from './diff'\nimport { createComponent, collectComponent } from './component-recycler'\nimport { removeNode } from '../dom/index'\nimport {\n  addScopedAttrStatic,\n  getCtorName,\n  scopeHost\n} from '../style'\nimport { proxyUpdate } from '../observe'\n\n/** Set a component's `props` (generally derived from JSX attributes).\n *\t@param {Object} props\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.renderSync=false]\tIf `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.\n *\t@param {boolean} [opts.render=true]\t\t\tIf `false`, no render will be triggered.\n */\nexport function setComponentProps(component, props, opts, context, mountAll) {\n  if (component._disable) return\n  component._disable = true\n\n  if ((component.__ref = props.ref)) delete props.ref\n  if ((component.__key = props.key)) delete props.key\n\n  if (!component.base || mountAll) {\n    if (component.beforeInstall) component.beforeInstall()\n    if (component.install) component.install()\n    if (component.constructor.observe) {\n      proxyUpdate(component)\n    }\n  }\n\n  if (context && context !== component.context) {\n    if (!component.prevContext) component.prevContext = component.context\n    component.context = context\n  }\n\n  if (!component.prevProps) component.prevProps = component.props\n  component.props = props\n\n  component._disable = false\n\n  if (opts !== NO_RENDER) {\n    if (\n      opts === SYNC_RENDER ||\n      options.syncComponentUpdates !== false ||\n      !component.base\n    ) {\n      renderComponent(component, SYNC_RENDER, mountAll)\n    } else {\n      enqueueRender(component)\n    }\n  }\n\n  applyRef(component.__ref, component)\n}\n\nfunction shallowComparison(old, attrs) {\n  let name\n\n  for (name in old) {\n    if (attrs[name] == null && old[name] != null) {\n      return true\n    }\n  }\n\n  if (old.children.length > 0 || attrs.children.length > 0) {\n    return true\n  }\n\n  for (name in attrs) {\n    if (name != 'children') {\n      let type = typeof attrs[name]\n      if (type == 'function' || type == 'object') {\n        return true\n      } else if (attrs[name] != old[name]) {\n        return true\n      }\n    }\n  }\n}\n\n/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.\n *\t@param {Component} component\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.build=false]\t\tIf `true`, component will build and store a DOM node if not already associated with one.\n *\t@private\n */\nexport function renderComponent(component, opts, mountAll, isChild) {\n  if (component._disable) return\n\n  let props = component.props,\n    data = component.data,\n    context = component.context,\n    previousProps = component.prevProps || props,\n    previousState = component.prevState || data,\n    previousContext = component.prevContext || context,\n    isUpdate = component.base,\n    nextBase = component.nextBase,\n    initialBase = isUpdate || nextBase,\n    initialChildComponent = component._component,\n    skip = false,\n    rendered,\n    inst,\n    cbase\n\n  // if updating\n  if (isUpdate) {\n    component.props = previousProps\n    component.data = previousState\n    component.context = previousContext\n    if (component.store || opts == FORCE_RENDER || shallowComparison(previousProps, props)) {\n      let receiveResult = true\n      if (component.receiveProps) {\n        receiveResult = component.receiveProps(props, previousProps)\n      }\n      if (receiveResult !== false) {\n        skip = false\n        if (component.beforeUpdate) {\n          component.beforeUpdate(props, data, context)\n        }\n      } else {\n        skip = true\n      }\n    } else {\n      skip = true\n    }\n    component.props = props\n    component.data = data\n    component.context = context\n  }\n\n  component.prevProps = component.prevState = component.prevContext = component.nextBase = null\n\n  if (!skip) {\n    component.beforeRender && component.beforeRender()\n    rendered = component.render(props, data, context)\n\n    //don't rerender\n    if (component.constructor.css || component.css) {\n      addScopedAttrStatic(\n        rendered,\n        '_s' + getCtorName(component.constructor)\n      )\n    }\n\n    scopeHost(rendered, component.scopedCssAttr)\n\n    // context to pass to the child, can be updated via (grand-)parent component\n    if (component.getChildContext) {\n      context = extend(extend({}, context), component.getChildContext())\n    }\n\n    let childComponent = rendered && rendered.nodeName,\n      toUnmount,\n      base,\n      ctor = options.mapping[childComponent]\n\n    if (ctor) {\n      // set up high order component link\n\n      let childProps = getNodeProps(rendered)\n      inst = initialChildComponent\n\n      if (inst && inst.constructor === ctor && childProps.key == inst.__key) {\n        setComponentProps(inst, childProps, SYNC_RENDER, context, false)\n      } else {\n        toUnmount = inst\n\n        component._component = inst = createComponent(ctor, childProps, context)\n        inst.nextBase = inst.nextBase || nextBase\n        inst._parentComponent = component\n        setComponentProps(inst, childProps, NO_RENDER, context, false)\n        renderComponent(inst, SYNC_RENDER, mountAll, true)\n      }\n\n      base = inst.base\n    } else {\n      cbase = initialBase\n\n      // destroy high order component link\n      toUnmount = initialChildComponent\n      if (toUnmount) {\n        cbase = component._component = null\n      }\n\n      if (initialBase || opts === SYNC_RENDER) {\n        if (cbase) cbase._component = null\n        base = diff(\n          cbase,\n          rendered,\n          context,\n          mountAll || !isUpdate,\n          initialBase && initialBase.parentNode,\n          true\n        )\n      }\n    }\n\n    if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n      let baseParent = initialBase.parentNode\n      if (baseParent && base !== baseParent) {\n        baseParent.replaceChild(base, initialBase)\n\n        if (!toUnmount) {\n          initialBase._component = null\n          recollectNodeTree(initialBase, false)\n        }\n      }\n    }\n\n    if (toUnmount) {\n      unmountComponent(toUnmount)\n    }\n\n    component.base = base\n    if (base && !isChild) {\n      let componentRef = component,\n        t = component\n      while ((t = t._parentComponent)) {\n        ;(componentRef = t).base = base\n      }\n      base._component = componentRef\n      base._componentConstructor = componentRef.constructor\n    }\n  }\n\n  if (!isUpdate || mountAll) {\n    mounts.unshift(component)\n  } else if (!skip) {\n    // Ensure that pending componentDidMount() hooks of child components\n    // are called before the componentDidUpdate() hook in the parent.\n    // Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n    // flushMounts();\n\n    if (component.afterUpdate) {\n      //deprecated\n      component.afterUpdate(previousProps, previousState, previousContext)\n    }\n    if (component.updated) {\n      component.updated(previousProps, previousState, previousContext)\n    }\n    if (options.afterUpdate) options.afterUpdate(component)\n  }\n\n  if (component._renderCallbacks != null) {\n    while (component._renderCallbacks.length)\n      component._renderCallbacks.pop().call(component)\n  }\n\n  if (!diffLevel && !isChild) flushMounts()\n}\n\n/** Apply the Component referenced by a VNode to the DOM.\n *\t@param {Element} dom\tThe DOM node to mutate\n *\t@param {VNode} vnode\tA Component-referencing VNode\n *\t@returns {Element} dom\tThe created/mutated element\n *\t@private\n */\nexport function buildComponentFromVNode(dom, vnode, context, mountAll) {\n  let c = dom && dom._component,\n    originalComponent = c,\n    oldDom = dom,\n    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n    isOwner = isDirectOwner,\n    props = getNodeProps(vnode)\n  while (c && !isOwner && (c = c._parentComponent)) {\n    isOwner = c.constructor === vnode.nodeName\n  }\n\n  if (c && isOwner && (!mountAll || c._component)) {\n    setComponentProps(c, props, ASYNC_RENDER, context, mountAll)\n    dom = c.base\n  } else {\n    if (originalComponent && !isDirectOwner) {\n      unmountComponent(originalComponent)\n      dom = oldDom = null\n    }\n\n    c = createComponent(vnode.nodeName, props, context, vnode)\n    if (dom && !c.nextBase) {\n      c.nextBase = dom\n      // passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n      oldDom = null\n    }\n    setComponentProps(c, props, SYNC_RENDER, context, mountAll)\n    dom = c.base\n\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null\n      recollectNodeTree(oldDom, false)\n    }\n  }\n\n  return dom\n}\n\n/** Remove a component from the DOM and recycle it.\n *\t@param {Component} component\tThe Component instance to unmount\n *\t@private\n */\nexport function unmountComponent(component) {\n  if (options.beforeUnmount) options.beforeUnmount(component)\n\n  let base = component.base\n\n  component._disable = true\n\n\tif (component.uninstall) component.uninstall()\n\n\tif (component.store && component.store.instances) {\n\t\tfor (let i = 0, len = component.store.instances.length; i < len; i++) {\n\t\t\tif (component.store.instances[i] === component) {\n\t\t\t\tcomponent.store.instances.splice(i, 1)\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n  component.base = null\n\n  // recursively tear down & recollect high-order component children:\n  let inner = component._component\n  if (inner) {\n    unmountComponent(inner)\n  } else if (base) {\n    if (base[ATTR_KEY] != null) applyRef(base[ATTR_KEY].ref, null)\n\n    component.nextBase = base\n\n    removeNode(base)\n    collectComponent(component)\n\n    removeChildren(base)\n  }\n\n  applyRef(component.__ref, null)\n}\n","import { FORCE_RENDER } from './constants'\nimport { renderComponent } from './vdom/component'\nimport options from './options'\nimport { nProps, assign } from './util'\n\nlet id = 0\n\nexport default class Component {\n  static is = 'WeElement'\n\n  constructor(props, store) {\n    this.props = assign(\n      nProps(this.constructor.props),\n      this.constructor.defaultProps,\n      props\n    )\n    this.elementId = id++\n    this.data = this.constructor.data || this.data || {}\n\n    this._preCss = null\n\n    this.store = store\n  }\n\n  update(callback) {\n    this._willUpdate = true\n    if (callback)\n      (this._renderCallbacks = this._renderCallbacks || []).push(callback)\n    renderComponent(this, FORCE_RENDER)\n    if (options.componentChange) options.componentChange(this, this.base)\n    this._willUpdate = false\n  }\n\n  fire(type, data) {\n    Object.keys(this.props).every(key => {\n      if ('on' + type.toLowerCase() === key.toLowerCase()) {\n        this.props[key]({ detail: data })\n        return false\n      }\n      return true\n    })\n  }\n\n  render() {}\n}\n","import { diff } from './vdom/diff'\n\n/** Render JSX into a `parent` Element.\n *\t@param {VNode} vnode\t\tA (JSX) VNode to render\n *\t@param {Element} parent\t\tDOM element to render into\n *\t@param {object} [store]\n *\t@public\n */\nexport function render(vnode, parent, store, empty, merge) {\n  parent = typeof parent === 'string' ? document.querySelector(parent) : parent\n\n  if (empty) {\n    while (parent.firstChild) {\n      parent.removeChild(parent.firstChild)\n    }\n  }\n\n  if (merge) {\n    merge =\n      typeof merge === 'string'\n        ? document.querySelector(merge)\n        : merge\n  }\n\n  return diff(merge, vnode, store, false, parent, false, true)\n}\n","import { define } from './define'\n\nexport function tag(name) {\n  return function(target) {\n    define(name, target)\n  }\n}\n","import { h } from './h'\nimport Component from './component'\nimport { render } from './render'\nimport { tag } from './tag'\nimport { define } from './define'\nimport options from './options'\n\nconst WeElement = Component\nconst root = getGlobal()\nconst omiax = {\n  h,\n  tag,\n\tdefine,\n\tComponent,\n\trender,\n\tWeElement,\n\toptions\n}\n\nroot.Omi = omiax\nroot.omi = omiax\nroot.omiax = omiax\nroot.omiax.version = '0.0.0'\n\nexport default {\n  h,\n  tag,\n\tdefine,\n\tComponent,\n\trender,\n\tWeElement,\n\toptions\n}\n\nexport {\n  h,\n  tag,\n\tdefine,\n\tComponent,\n\trender,\n\tWeElement,\n\toptions\n}\n\nfunction getGlobal() {\n  if (\n    typeof global !== 'object' ||\n    !global ||\n    global.Math !== Math ||\n    global.Array !== Array\n  ) {\n    if (typeof self !== 'undefined') {\n      return self\n    } else if (typeof window !== 'undefined') {\n      return window\n    } else if (typeof global !== 'undefined') {\n      return global\n    }\n    return (function() {\n      return this\n    })()\n  }\n  return global\n}\n","import layoutNode from '../../src/layout/layout-node'\nimport '../../src/index'\n\nvar size = getSize();\n\nconst vnode = <surface top={0} left={0} width={size.width} height={size.height} enableCSSLayout={true}>\n  <group style={getPageStyle()}>\n    <text style={getTitleStyle()}>\n      Professor PuddinPop\n   </text>\n    <group style={getImageGroupStyle()}>\n      <image src='https://placekitten.com/720/840' style={getImageStyle()} fadeIn={true} />\n    </group>\n    <text style={getExcerptStyle()}>\n      With these words the Witch fell down in a brown, melted, shapeless mass and began to spread over the clean boards of the kitchen floor.  Seeing that she had really melted away to nothing, Dorothy drew another bucket of water and threw it over the mess.  She then swept it all out the door.  After picking out the silver shoe, which was all that was left of the old woman, she cleaned and dried it with a cloth, and put it on her foot again.  Then, being at last free to do as she chose, she ran out to the courtyard to tell the Lion that the Wicked Witch of the West had come to an end, and that they were no longer prisoners in a strange land.\n   </text>\n  </group>\n</surface>\n\nconsole.log(layoutNode(vnode))\n\nfunction getSize() {\n  return {\n    left: 0,\n    top: 0,\n    width: 420,\n    height: 740\n  }\n}\n\nfunction getPageStyle() {\n\n  return {\n    position: 'relative',\n    padding: 14,\n    width: size.width,\n    height: size.height,\n    backgroundColor: '#f7f7f7',\n    flexDirection: 'column'\n  };\n}\n\nfunction getImageGroupStyle() {\n  return {\n    position: 'relative',\n    flex: 1,\n    backgroundColor: '#eee'\n  };\n}\n\nfunction getImageStyle() {\n  return {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  };\n}\n\nfunction getTitleStyle() {\n  return {\n    fontFace: FontFace('Georgia'),\n    fontSize: 22,\n    lineHeight: 28,\n    height: 28,\n    marginBottom: 10,\n    color: '#333',\n    textAlign: 'center'\n  };\n}\n\nfunction getExcerptStyle() {\n  return {\n    fontFace: FontFace('Georgia'),\n    fontSize: 17,\n    lineHeight: 25,\n    marginTop: 15,\n    flex: 1,\n    color: '#333'\n  };\n}\n\nfunction FontFace() {\n\n}"],"names":["computeLayout","capitalizeFirst","str","charAt","toUpperCase","slice","getSpacing","node","type","suffix","location","key","style","getPositiveSpacing","isUndefined","value","undefined","getMargin","getPadding","getBorder","getPaddingAndBorder","getMarginAxis","axis","leading","trailing","getPaddingAndBorderAxis","getJustifyContent","justifyContent","getAlignItem","child","alignSelf","alignItems","getFlexDirection","flexDirection","getPositionType","position","getFlex","flex","isFlex","CSS_POSITION_RELATIVE","isFlexWrap","flexWrap","getDimWithMargin","layout","dim","isDimDefined","isPosDefined","pos","isMeasureDefined","getPosition","setDimensionFromStyle","fmaxf","getRelativePosition","row","column","a","b","CSS_UNDEFINED","CSS_FLEX_DIRECTION_ROW","CSS_FLEX_DIRECTION_COLUMN","CSS_JUSTIFY_FLEX_START","CSS_JUSTIFY_CENTER","CSS_JUSTIFY_FLEX_END","CSS_JUSTIFY_SPACE_BETWEEN","CSS_JUSTIFY_SPACE_AROUND","CSS_ALIGN_FLEX_START","CSS_ALIGN_CENTER","CSS_ALIGN_STRETCH","CSS_POSITION_ABSOLUTE","layoutNode","parentMaxWidth","mainAxis","crossAxis","width","isRowUndefined","isColumnUndefined","measure_dim","measure","height","i","children","length","ii","definedMainDim","startLine","endLine","alreadyComputedNextLayout","linesCrossDim","linesMainDim","mainContentDim","flexibleChildrenCount","totalFlexible","nonFlexibleChildrenCount","nextContentDim","maxWidth","leadingMainDim","betweenMainDim","remainingMainDim","flexibleMainDim","crossDim","mainDim","containerMainAxis","containerCrossAxis","leadingCrossDim","alignItem","remainingCrossDim","root","rootNode","createNode","walkNode","layer","top","left","attributes","map","parentLeft","parentTop","frame","x","y","forEach","stack","h","lastSimple","simple","arguments","push","p","pop","String","NO_RENDER","SYNC_RENDER","FORCE_RENDER","ASYNC_RENDER","ATTR_KEY","IS_NON_DIMENSIONAL","nodeId","uniqueId","docMap","addDoc","id","doc","getDoc","removeDoc","insertIndex","target","list","newIndex","before","after","splice","nextSibling","previousSibling","moveIndex","index","indexOf","newIndexAfter","beforeNew","afterNew","removeIndex","changeSibling","linkParent","parent","parentNode","docId","ownerDocument","nodeMap","depth","childNodes","displayMap","div","span","registerNode","Element","nodeType","ref","display","classStyle","event","nodeName","firstChild","appendChild","removeChild","insertBefore","insertAfter","removeElement","setAttribute","silent","result","setAttr","removeAttribute","setStyle","setStyles","styles","Object","assign","setClassStyle","toStyle","addEventListener","handler","removeEventListener","removeEvent","fireEvent","e","call","getComputedStyle","toJSON","keys","replaceChild","newChild","oldChild","destroy","TextNode","nodeValue","splitText","Document","_isMockDocument","createElement","tagName","props","el","createTextNode","txt","listener","scrollTo","animated","document","getGlobal","global","Math","Array","self","window","scopedStyle","mapping","isWeb","staticStyleMapping","mock","styleCache","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","source","from","to","symbols","s","runListeners","oEvent","iLstId","iElId","oEvtListeners","oListeners","aEls","aEvts","sEventType","fListener","nElIdx","aElListeners","create","proto","propertiesObject","Error","F","trim","replace","extend","obj","applyRef","current","usePromise","Promise","__config__","platform","systemVersion","split","defer","resolve","then","bind","setTimeout","isArray","toString","nProps","getUse","data","paths","path","isPath","getTargetByPath","tempPath","tempVal","args","apply","origin","arr","len","items","enqueueRender","component","options","debounceRendering","rerender","renderComponent","isSameNodeType","vnode","hydrating","ctor","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","getNodeProps","defaultProps","isSvg","createElementNS","parseCSSText","cssText","cssTxt","match","rule","cssToJs","properties","o","property","removeNode","setAccessor","name","old","className","test","oldJson","currentJson","changed","ckey","innerHTML","__html","useCapture","substring","eventProxy","touchStart","touchEnd","_listeners","setProperty","ns","removeAttributeNS","setAttributeNS","___touchX","touches","pageX","___touchY","pageY","___scrollTop","body","scrollTop","abs","changedTouches","dispatchEvent","CustomEvent","detail","draw","res","console","log","mounts","diffLevel","isSvgMode","flushMounts","c","afterMount","installed","diff","dom","context","mountAll","componentRoot","fromRender","ownerSVGElement","ret","idiff","out","prevSvgMode","vnodeName","buildComponentFromVNode","_component","recollectNodeTree","fc","vchildren","_renderText","text","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","isHydrating","originalChildren","keyed","keyedLen","min","childrenLen","vlen","j","f","vchild","__key","unmountOnly","unmountComponent","removeChildren","lastChild","next","attrs","OBJECTTYPE","ARRAYTYPE","define","use","updatePath","getPath","getUpdatePath","item","dataToPath","_objToPath","_arrayToPath","components","collectComponent","constructor","createComponent","Ctor","inst","render","Component","doRender","scopedCssAttr","css","store","instances","initUse","_updatePath","nextBase","styleId","getCtorName","attrName","addScopedAttrStatic","vdom","attr","scopeVdom","scopeHost","obaa","callback","_observe","$observer","eventPropArr","$observeProps","$observerPath","prop","isInArray","watch","isString","propertyChangedHandler","propChanged","all","onPropertyChanged","oldValue","rootName","_getRootName","methods","RegExp","triggerStr","cprop","isFunction","currentValue","defineProperty","get","set","join","add","exec","size","callbacks","nextTickCallback","fireTick","fn","scope","nextItem","proxyUpdate","ele","timeout","_willUpdate","mergeUpdate","clearTimeout","update","setComponentProps","opts","_disable","__ref","base","beforeInstall","install","observe","prevContext","prevProps","syncComponentUpdates","shallowComparison","isChild","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","skip","rendered","cbase","receiveResult","receiveProps","beforeUpdate","beforeRender","getChildContext","childComponent","toUnmount","childProps","_parentComponent","baseParent","componentRef","t","unshift","afterUpdate","updated","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","uninstall","inner","elementId","_preCss","componentChange","fire","every","is","empty","merge","querySelector","tag","WeElement","omiax","Omi","omi","version","getSize","getPageStyle","getTitleStyle","getImageGroupStyle","getImageStyle","getExcerptStyle","padding","backgroundColor","right","bottom","fontFace","FontFace","fontSize","lineHeight","marginBottom","color","textAlign","marginTop"],"mappings":"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"}