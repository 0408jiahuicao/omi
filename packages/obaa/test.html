<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<title>obaa test</title>
	<script src="deep-equal.js"></script>
	<script src="index.js"></script>
</head>

<body>
	<a href="https://github.com/Tencent/omi" target="_blank" style="position:absolute;right:0;top:0;">
		<img src="http://alloyteam.github.io/github.png" alt="" />
	</a>

	<script>
		var result = [
			['a', 2, 1, '#'],
			['a', { b: 1 }, 2, '#'],
			['b', 'abc', 1, '#-a'],
			['c', 4, 3, '#']
		]
		var count = 0
		var obj = { a: 1 }
		obaa(obj, function (prop, value, old, path) {
			count++
			console.log(prop, value, old, path)
			var item = result.shift()
			console.log(deepEqual(prop, item[0]), deepEqual(value, item[1]), deepEqual(old, item[2]), deepEqual(path, item[3]))
		})


		obj.a = 2
		obj.a = { b: 1 }
		obj.a.b = 'abc'



		obaa.set(obj, 'c', 3);
		obj.c = 4;//c__4__3__#

		console.log(count === 4)
	</script>


</body>

</html>
